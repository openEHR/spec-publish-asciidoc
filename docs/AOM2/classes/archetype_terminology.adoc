==== ARCHETYPE_TERMINOLOGY Class

[cols="^1,2,3"]
|===
|*Class*
{set:cellbgcolor:lightblue}
2+^|*ARCHETYPE_TERMINOLOGY*

|*Description*
{set:cellbgcolor:lightblue}
2+|Local terminology of an archetype. This class defines the semantics of the terminology of an archetype.
{set:cellbgcolor!}

|*Attributes*
{set:cellbgcolor:lightblue}
^|*Signature*
^|*Meaning*

|*1..1*
{set:cellbgcolor:lightblue}
|*is_differential*: `Boolean`
{set:cellbgcolor!}
|

|*1..1*
{set:cellbgcolor:lightblue}
|*original_language*: `String`
{set:cellbgcolor!}
|Original language of the terminology, as set at archetype creation or parsing time; must be a code in the ISO 639-1 2 character language code-set.

|*1..1*
{set:cellbgcolor:lightblue}
|*concept_code*: `String`
{set:cellbgcolor!}
|Term code defining the meaning of the archetype as a whole, and always used as the at-code on the root node of the archetype. Must be defined in the term_definitions property.

|*1..1*
{set:cellbgcolor:lightblue}
|*term_definitions*: `Hash<Hash<ARCHETYPE_TERM, String>, String>`
{set:cellbgcolor!}
|Directory of term definitions as a two-level table. The outer hash keys are language codes, e.g. “en”, “de”, while the inner hash keys are term codes, e.g. “id17”, “at4”.

|*0..1*
{set:cellbgcolor:lightblue}
|*term_bindings*: `Hash <Hash<Uri, String>, String>`
{set:cellbgcolor!}
|Directory of bindings to external terminology codes and value sets, as a two-level table. The outer hash keys are terminology ids, e.g. “SNOMED_CT”, and the inner hash keys are constraint codes, e.g. “at4”, “ac13” or paths. The indexed DV_URI objects represent references to externally defined resources, either terms, ontology concepts, or terminology subsets / ref-sets.

|*1..1*
{set:cellbgcolor:lightblue}
|*parent_archetype*: `ARCHETYPE`
{set:cellbgcolor!}
|Archetype which owns this terminology.

|*0..1*
{set:cellbgcolor:lightblue}
|*value_sets*: `Hash<VALUE_SET, String>`
{set:cellbgcolor!}
|Archetype-local value sets, each keyed by value-set id, i.e. an ac-code.

|*0..1*
{set:cellbgcolor:lightblue}
|*terminology_extracts*: `Hash<Hash<ARCHETYPE_TERM, String>, String>`
{set:cellbgcolor!}
|Directory of extracts of external terminologies, as a two-level table. The outer hash keys are terminology ids, e.g. “SNOMED_CT”, while the inner hash keys are term codes or code-phrases from the relevant terminology, e.g. “10094842”.
|*Functions*
{set:cellbgcolor:lightblue}
^|*Signature*
^|*Meaning*

|
{set:cellbgcolor:lightblue}
|*specialisation_depth*: `Integer`
{set:cellbgcolor!}
|Specialisation depth of this archetype. Unspecialised archetypes have depth 0, with each additional level of specialisation adding 1 to the specialisation_depth.

|
{set:cellbgcolor:lightblue}
|*id_codes*: `List<String>`
{set:cellbgcolor!}
|List of all id codes in the terminology., i.e. the “id” codes in an ADL archetype, which are the node_ids on C_OBJECT descendants.

|
{set:cellbgcolor:lightblue}
|*value_codes*: `List<String>`
{set:cellbgcolor!}
|List of all value term codes in the terminology, i.e. the “at” codes in an ADL archetype, which are used as possible values on terminological constrainer nodes.

|
{set:cellbgcolor:lightblue}
|*value_set_codes*: `List<String>`
{set:cellbgcolor!}
|List of all value set codes in the terminology defining value sets. These correspond to the “ac” codes in an ADL archetype.

|
{set:cellbgcolor:lightblue}
|*has_language* (a_lang: `String`): `Boolean`
{set:cellbgcolor!}
|True if language `a_lang' is present in archetype terminology. 

|
{set:cellbgcolor:lightblue}
|*has_terminology* (a_terminology_id: `String`): `boolean`
{set:cellbgcolor!}
|True if terminology `a_terminology' is present in archetype ontology. 

|
{set:cellbgcolor:lightblue}
|*has_term_code* (a_code: `String`): `boolean`
{set:cellbgcolor!}
|True if code 'a_code' defined in this terminology.

|
{set:cellbgcolor:lightblue}
|*term_definition* (a_lang: `String`, a_code: `String`): `ARCHETYPE_TERM` +
*_Pre_*: has_term-definition (a_lang, a_code)
{set:cellbgcolor!}
|Term definition for a code, in a specified language. 

|
{set:cellbgcolor:lightblue}
|*term_binding* (a_terminology: `String`, a_code: `String`): `Uri` +
*_Pre_*: has_term_binding (a_terminology_id, a_code)
{set:cellbgcolor!}
|Binding of constraint corresponding to a_code in target external terminology a_terminology_id, as a string, which is usually a formal query expression.

|
{set:cellbgcolor:lightblue}
|*terminologies_available*: `List<String>`
{set:cellbgcolor!}
|List of terminologies to which term or constraint bindings exist in this terminology, computed from bindings.

|
{set:cellbgcolor:lightblue}
|*terminology_extract_term* (a_terminology_id: `String`, a_code: `String`): `ARCHETYPE_TERM` +
*_Pre_*: has_terminology_extract (a_terminology_id) and has_terminology_extract_code (a_code)
{set:cellbgcolor!}
|Return an ARCHETYPE_TERM from specified terminology extract, for specified term code.

|
{set:cellbgcolor:lightblue}
|*has_terminology_extract* (a_terminology_id: `String`): `Boolean`
{set:cellbgcolor!}
|

|
{set:cellbgcolor:lightblue}
|*languages_available*: `List<String>`
{set:cellbgcolor!}
|List of languages in which terms in this terminology are available.

|*Invariant*
{set:cellbgcolor:lightblue}
2+|*_Original_language_validity_*: code_set (Code_set_id_languages).has_concept_id (original_language)
{set:cellbgcolor!}

|
{set:cellbgcolor:lightblue}
2+|*_concept_code_validity_*: id_codes.has (concept_code)
{set:cellbgcolor!}

|
{set:cellbgcolor:lightblue}
2+|*_Term_bindings_validity_*: bindings /= void implies not bindings.is_empty
{set:cellbgcolor!}

|
{set:cellbgcolor:lightblue}
2+|*_Parent_archetype_valid_*: parent_archetype.terminology = Current
{set:cellbgcolor!}
|===
