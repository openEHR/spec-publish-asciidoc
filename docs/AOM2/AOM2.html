<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="description" content="openEHR Archetype Object Model (AOM2) specification">
<meta name="keywords" content="archetype, openehr, aom, aom2">
<title>Archetype Object Model (AOM2)</title>
<link rel="stylesheet" href="../../../spec-publish-asciidoc/css/openehr.css">
<link rel="stylesheet" href="../../../spec-publish-asciidoc/css/pygments-murphy.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_archetype_object_model_aom2">Archetype Object Model (AOM2)</a>
<ul class="sectlevel1">
<li><a href="#_amendment_record">Amendment Record</a></li>
<li><a href="#_trademarks">Trademarks</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a></li>
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_purpose">1.1. Purpose</a></li>
<li><a href="#_related_documents">1.2. Related Documents</a></li>
<li><a href="#_nomenclature">1.3. Nomenclature</a></li>
<li><a href="#_status">1.4. Status</a></li>
<li><a href="#_tools">1.5. Tools</a></li>
<li><a href="#_changes_from_previous_versions">1.6. Changes from Previous Versions</a>
<ul class="sectlevel3">
<li><a href="#_release_1_5_to_2_0_document_version_2_1_2">1.6.1. Release 1.5 to 2.0 (Document version 2.1.2 - )</a></li>
<li><a href="#_release_1_4_to_1_5_document_version_2_0_to_2_1_1">1.6.2. Release 1.4 to 1.5 (Document version 2.0 to 2.1.1)</a></li>
<li><a href="#_release_0_6_to_1_4">1.6.3. Release 0.6 to 1.4</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_model_overview">2. Model Overview</a>
<ul class="sectlevel2">
<li><a href="#_package_structure">2.1. Package Structure</a></li>
</ul>
</li>
<li><a href="#_definition_and_utility_classes">3. Definition and Utility Classes</a>
<ul class="sectlevel2">
<li><a href="#_overview">3.1. Overview</a></li>
<li><a href="#_class_definitions">3.2. Class Definitions</a>
<ul class="sectlevel3">
<li><a href="#_version_status_enumeration">3.2.1. VERSION_STATUS Enumeration</a></li>
<li><a href="#_validity_kind_enumeration">3.2.2. VALIDITY_KIND Enumeration</a></li>
<li><a href="#_adl_code_definitions_class">3.2.3. ADL_CODE_DEFINITIONS Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_the_archetype_package">4. The Archetype Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_2">4.1. Overview</a></li>
<li><a href="#_archteype_identification">4.2. Archteype Identification</a>
<ul class="sectlevel3">
<li><a href="#_human_readable_identifier_hrid">4.2.1. Human-Readable Identifier (HRID)</a></li>
<li><a href="#_machine_identifiers">4.2.2. Machine Identifiers</a></li>
</ul>
</li>
<li><a href="#_top_level_meta_data">4.3. Top-level Meta-data</a>
<ul class="sectlevel3">
<li><a href="#_adl_version">4.3.1. ADL Version</a></li>
<li><a href="#_reference_model_release">4.3.2. Reference Model Release</a></li>
<li><a href="#_generated_flag">4.3.3. Generated Flag</a></li>
</ul>
</li>
<li><a href="#_governance_meta_data">4.4. Governance Meta-data</a>
<ul class="sectlevel3">
<li><a href="#_governance_meta_data_items">4.4.1. Governance Meta-data Items</a>
<ul class="sectlevel4">
<li><a href="#_package">Package</a></li>
<li><a href="#_lifecycle_state">Lifecycle_state</a></li>
<li><a href="#_original_namespace_and_original_publisher">Original_namespace and Original_publisher</a></li>
<li><a href="#_custodian_namespace_and_custodian_organisation">Custodian_namespace and Custodian_organisation</a></li>
<li><a href="#_intellectual_property_items">Intellectual Property Items</a></li>
</ul>
</li>
<li><a href="#_authorship_meta_data">4.4.2. Authorship Meta-data</a>
<ul class="sectlevel4">
<li><a href="#_original_author">Original Author</a></li>
<li><a href="#_contributors">Contributors</a></li>
<li><a href="#_languages_and_translation">Languages and Translation</a></li>
<li><a href="#_version_last_translated">Version_last_translated</a></li>
</ul>
</li>
<li><a href="#_descriptive_meta_data">4.4.3. Descriptive Meta-data</a>
<ul class="sectlevel4">
<li><a href="#_purpose_2">Purpose</a></li>
<li><a href="#_use_and_misuse">Use and Misuse</a></li>
<li><a href="#_keywords">Keywords</a></li>
<li><a href="#_resources">Resources</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_structural_definition">4.5. Structural Definition</a>
<ul class="sectlevel3">
<li><a href="#_common_structural_parts">4.5.1. Common Structural Parts</a></li>
<li><a href="#_structural_variants">4.5.2. Structural Variants</a></li>
</ul>
</li>
<li><a href="#_class_descriptions">4.6. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_archetype_class">4.6.1. ARCHETYPE Class</a></li>
<li><a href="#_authored_archetype_class">4.6.2. AUTHORED_ARCHETYPE Class</a></li>
<li><a href="#_archetype_hrid_class">4.6.3. ARCHETYPE_HRID Class</a></li>
<li><a href="#_template_class">4.6.4. TEMPLATE Class</a></li>
<li><a href="#_template_overlay_class">4.6.5. TEMPLATE_OVERLAY Class</a></li>
<li><a href="#_operational_template_class">4.6.6. OPERATIONAL_TEMPLATE Class</a></li>
</ul>
</li>
<li><a href="#_validity_rules">4.7. Validity Rules</a></li>
</ul>
</li>
<li><a href="#_constraint_model_package">5. Constraint Model Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_3">5.1. Overview</a></li>
<li><a href="#_semantics">5.2. Semantics</a>
<ul class="sectlevel3">
<li><a href="#_all_node_types">5.2.1. All Node Types</a></li>
</ul>
</li>
<li><a href="#_path_functions">5.3. Path Functions</a></li>
<li><a href="#_conformance_functions">5.4. Conformance Functions</a>
<ul class="sectlevel3">
<li><a href="#_attribute_node_types">5.4.1. Attribute Node Types</a></li>
<li><a href="#_object_node_types">5.4.2. Object Node Types</a>
<ul class="sectlevel4">
<li><a href="#_node_id_and_paths">Node_id and Paths</a></li>
<li><a href="#_sibling_ordering">Sibling Ordering</a></li>
<li><a href="#_defined_object_nodes_c_defined_object">Defined Object Nodes (C_DEFINED_OBJECT)</a></li>
<li><a href="#_valid_value">Valid_value</a></li>
<li><a href="#_prototype_value">Prototype_value</a></li>
<li><a href="#_default_value">Default_value</a></li>
<li><a href="#_node_deprecation">Node Deprecation</a></li>
<li><a href="#__frozen_nodes">‘Frozen’ Nodes</a></li>
<li><a href="#_complex_objects_c_complex_object">Complex Objects (C_COMPLEX_OBJECT)</a></li>
<li><a href="#_any_allowed">Any_allowed</a></li>
<li><a href="#_primitive_types_c_primitive_object_descendants">Primitive Types (C_PRIMITIVE_OBJECT descendants)</a></li>
<li><a href="#_terminology_constraints_code_c_terminology_code_code">Terminology Constraints - <code>C_TERMINOLOGY_CODE</code></a></li>
<li><a href="#_assumed_value">Assumed_value</a></li>
<li><a href="#_reference_objects">Reference Objects</a></li>
<li><a href="#_constraints_on_enumeration_types">Constraints on Enumeration Types</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_second_order_constraints">5.5. Second Order Constraints</a>
<ul class="sectlevel3">
<li><a href="#_tuple_constraints">5.5.1. Tuple Constraints</a></li>
<li><a href="#_assertions">5.5.2. Assertions</a></li>
</ul>
</li>
<li><a href="#_aom_type_substitutions">5.6. AOM Type Substitutions</a></li>
<li><a href="#_class_definitions_2">5.7. Class Definitions</a>
<ul class="sectlevel3">
<li><a href="#_archetype_constraint_class">5.7.1. ARCHETYPE_CONSTRAINT Class</a></li>
<li><a href="#_c_attribute_class">5.7.2. C_ATTRIBUTE Class</a></li>
<li><a href="#_conformance_semantics">5.7.3. Conformance Semantics</a></li>
</ul>
</li>
<li><a href="#_validity_rules_2">5.8. Validity Rules</a>
<ul class="sectlevel3">
<li><a href="#_cardinality_class">5.8.1. CARDINALITY Class</a></li>
<li><a href="#_c_object_class">5.8.2. C_OBJECT Class</a></li>
</ul>
</li>
<li><a href="#_occurrences_inferencing_rules">5.9. Occurrences inferencing rules</a></li>
<li><a href="#_conformance_semantics_2">5.10. Conformance semantics</a></li>
<li><a href="#_validity_rules_3">5.11. Validity Rules</a>
<ul class="sectlevel3">
<li><a href="#_sibling_order_class">5.11.1. SIBLING_ORDER Class</a></li>
<li><a href="#_c_defined_object_class">5.11.2. C_DEFINED_OBJECT Class</a></li>
<li><a href="#_c_complex_object_class">5.11.3. C_COMPLEX_OBJECT Class</a></li>
</ul>
</li>
<li><a href="#_validity_rules_4">5.12. Validity Rules</a>
<ul class="sectlevel3">
<li><a href="#_c_archetype_root_class">5.12.1. C_ARCHETYPE_ROOT Class</a>
<ul class="sectlevel4">
<li><a href="#_validity_rules_5">Validity Rules</a></li>
</ul>
</li>
<li><a href="#_archetype_slot_class">5.12.2. ARCHETYPE_SLOT Class</a>
<ul class="sectlevel4">
<li><a href="#_validity_rules_6">Validity Rules</a></li>
</ul>
</li>
<li><a href="#_c_complex_object_proxy_class">5.12.3. C_COMPLEX_OBJECT_PROXY Class</a>
<ul class="sectlevel4">
<li><a href="#_validity_rules_7">Validity Rules</a></li>
</ul>
</li>
<li><a href="#_c_primitive_object_class">5.12.4. C_PRIMITIVE_OBJECT Class</a>
<ul class="sectlevel4">
<li><a href="#_validity_rules_8">Validity Rules</a></li>
</ul>
</li>
<li><a href="#_c_boolean_class">5.12.5. C_BOOLEAN Class</a></li>
<li><a href="#_c_string_class">5.12.6. C_STRING Class</a></li>
<li><a href="#_c_ordered_class">5.12.7. C_ORDERED Class</a></li>
<li><a href="#_c_integer_class">5.12.8. C_INTEGER Class</a></li>
<li><a href="#_c_real_class">5.12.9. C_REAL Class</a></li>
<li><a href="#_c_temporal_class">5.12.10. C_TEMPORAL Class</a></li>
<li><a href="#_c_date_class">5.12.11. C_DATE Class</a></li>
<li><a href="#_c_time_class">5.12.12. C_TIME Class</a></li>
<li><a href="#_c_date_time_class">5.12.13. C_DATE_TIME Class</a></li>
<li><a href="#_c_duration_class">5.12.14. C_DURATION Class</a></li>
<li><a href="#_c_terminology_code_class">5.12.15. C_TERMINOLOGY_CODE Class</a></li>
<li><a href="#_terminology_code_class">5.12.16. TERMINOLOGY_CODE Class</a></li>
<li><a href="#_c_second_order_class">5.12.17. C_SECOND_ORDER Class</a></li>
<li><a href="#_c_attribute_tuple_class">5.12.18. C_ATTRIBUTE_TUPLE Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_the_assertion_package">6. The Assertion Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_4">6.1. Overview</a></li>
<li><a href="#_semantics_2">6.2. Semantics</a></li>
<li><a href="#_class_descriptions_2">6.3. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_rule_statement_class">6.3.1. RULE_STATEMENT Class</a></li>
<li><a href="#_assertion_class">6.3.2. ASSERTION Class</a></li>
<li><a href="#_variable_declaration_class">6.3.3. VARIABLE_DECLARATION Class</a></li>
<li><a href="#_expr_variable_class">6.3.4. EXPR_VARIABLE Class</a></li>
<li><a href="#_builtin_variable_class">6.3.5. BUILTIN_VARIABLE Class</a></li>
<li><a href="#_query_variable_class">6.3.6. QUERY_VARIABLE Class</a></li>
<li><a href="#_expr_item_class">6.3.7. EXPR_ITEM Class</a></li>
<li><a href="#_expr_leaf_class">6.3.8. EXPR_LEAF Class</a></li>
<li><a href="#_expr_constant_class">6.3.9. EXPR_CONSTANT Class</a></li>
<li><a href="#_expr_constraint_class">6.3.10. EXPR_CONSTRAINT Class</a></li>
<li><a href="#_expr_archetype_id_constraint_class">6.3.11. EXPR_ARCHETYPE_ID_CONSTRAINT Class</a></li>
<li><a href="#_expr_model_ref_class">6.3.12. EXPR_MODEL_REF Class</a></li>
<li><a href="#_expr_variable_ref_class">6.3.13. EXPR_VARIABLE_REF Class</a></li>
<li><a href="#_expr_operator_class">6.3.14. EXPR_OPERATOR Class</a></li>
<li><a href="#_expr_unary_operator_class">6.3.15. EXPR_UNARY_OPERATOR Class</a></li>
<li><a href="#_expr_binary_operator_class">6.3.16. EXPR_BINARY_OPERATOR Class</a></li>
<li><a href="#_operator_kind_enumeration">6.3.17. OPERATOR_KIND Enumeration</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_terminology_package">7. Terminology Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_5">7.1. Overview</a></li>
<li><a href="#_semantics_3">7.2. Semantics</a>
<ul class="sectlevel3">
<li><a href="#_specialisation_depth">7.2.1. Specialisation Depth</a></li>
</ul>
</li>
<li><a href="#_class_descriptions_3">7.3. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_archetype_terminology_class">7.3.1. ARCHETYPE_TERMINOLOGY Class</a></li>
<li><a href="#_terminology_relation_class">7.3.2. TERMINOLOGY_RELATION Class</a></li>
<li><a href="#_value_set_class">7.3.3. VALUE_SET Class</a></li>
<li><a href="#_archetype_term_class">7.3.4. ARCHETYPE_TERM Class</a>
<ul class="sectlevel4">
<li><a href="#_validity_rules_9">Validity Rules</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_validation_and_transformation_semantics">8. Validation and Transformation Semantics</a>
<ul class="sectlevel2">
<li><a href="#_validation">8.1. Validation</a></li>
<li><a href="#_flattening">8.2. Flattening</a></li>
<li><a href="#_diff_ing">8.3. Diff’ing</a></li>
</ul>
</li>
<li><a href="#_references">References</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../../../spec-publish-asciidoc/resources/images/openehr_logo_large.png" alt="openEHR logo">
</div>
</div>
</div>
</div>
<h1 id="_archetype_object_model_aom2" class="sect0">Archetype Object Model (AOM2)</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="3"><strong>Issuer</strong>: <a href="http://www.openehr.org/programs/specification/">openEHR Specification Program</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Revision</strong>: <a href="#latest_issue">[latest_issue]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong>: <a href="#latest_issue_date">[latest_issue_date]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong>: TRIAL</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>Keywords</strong>: EHR, ADL, health records, archetypes, constraints</p></td>
</tr>
</tbody>
</table>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="diagrams/block_diagram.png" alt="openEHR components">
</div>
</div>
<div class="literalblock">
<div class="content">
<pre> </pre>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">&#169; 2004 - 2015 The openEHR Foundation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><a href="http://www.openehr.org/">The openEHR Foundation</a> is an independent, non-profit community organisation, facilitating the sharing of health records by consumers and clinicians via open-source, standards-based implementations.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Affiliates</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Australia, Brazil, Japan, New Zealand, Slovenia, Norway</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Licence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="../../../spec-publish-asciidoc/resources/images/cc-by-nd-88x31.png" alt="image"></span> Creative Commons Attribution-NoDerivs 3.0 Unported. <a href="https://creativecommons.org/licenses/by-nd/3.0/" class="bare">https://creativecommons.org/licenses/by-nd/3.0/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Support</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues: <a href="https://openehr.atlassian.net/browse/SPECPR/" class="bare">https://openehr.atlassian.net/browse/SPECPR/</a><br>
 Web: <a href="http://www.openehr.org/" class="bare">http://www.openehr.org/</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_amendment_record">Amendment Record</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 9%;">
<col style="width: 54%;">
<col style="width: 18%;">
<col style="width: 18%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Details</th>
<th class="tableblock halign-left valign-top">Raiser</th>
<th class="tableblock halign-left valign-top">Completed</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue"></a>2.1.14</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Refactor <code>ARCHETYPE</code> and <code>ARCHETYPE_TERMINOLOGY</code> models, in order to simplify: remove differential and flat forms of classes.<br>
 Split <code>ARCHETYPE</code> into two classes, with <code>AUTHORED_ARCHETYPE</code> as a new class that inherits from <code>AUTHORED_RESOURCE</code> .</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue_date"></a>04 Jan 2015</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.13</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Remove <code>VDSSR</code> , <code>VSUNC</code> ; add <code>VDSSID</code> , <code>VARXID</code> . Replace ‘+u’ (unstable) version modifier with semver.org standard ‘-alpha’. Remove overview material to new Archetypes: Technical Overview specification.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 I McNicoll,<br>
 S Garde</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12 Nov 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.12</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Remove <code>ARCHETYPE</code> .uid attribute.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Solbrig</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">08 Oct 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.11</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Correct spelling of ‘licence’ to international English; rename <code>ARCHETYPE</code>.<code><em>urn</em></code> to <code><em>provenance_id</em></code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Garde,<br>
 I McNicoll</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">29 Sep 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.10</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Modified <code>C_ARCHETYPE_ROOT</code> to have an id-code in all cases.
 Add error <code>VSONPO</code> , <code>VSONPT</code> : specialised archetype object node prohibited occurrences validity.<br>
 Added support for constraints on enumerated types.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CIMI,<br>
 P Langford,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">18 Jul 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.9</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Convert <code>ARCHETYPE</code> .uid to urn: <code>URN</code> .</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I McNicoll,<br>
 S Garde,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04 Jun 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.8</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Rename <code>ARCHETYPE</code> .commit_number to <code><em>build_count</em></code> .</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I McNicoll,<br>
 S Garde,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">21 May 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.7</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Make <code>VACMCL</code> a warning <code>WACMCL</code> .</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D Moner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">07 Apr 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.6</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Renamed <code>ARCHETYPE_INTERNAL_REF</code> to <code>C_OBJECT_PROXY</code> .</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">09 Mar 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.5</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Renamed ontology to terminology and simplified.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">09 Jan 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.4</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Remove <code>CONSTRAINT_REF</code> , <code>C_REFERENCE_OBJECT</code> types; introduce new identification system.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale<br>
 H Solbrig</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">07 Jan 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.3</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Detailed Technical Review.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Solbrig</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">21 Nov 2013</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.2</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Remove <code>C_DOMAIN_TYPE</code> ;<br>
 merge <code>C_PRIMITIVE_OBJECT</code> and <code>C_PRIMITIVE</code> ;<br>
 Add support for tuple constraints, replacing ADL 1.4 special Ordinal and Quantity constrainer types;
 Add new primitive type <code>C_TERMINOLOGY_CODE</code> .
 Added <code>VSONIF</code> , removed <code>VSONCI</code> (dup of <code>VSONI</code> ).</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Solbrig<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Aug2013</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Remove <code>C_SINGLE_ATTRIBUTE</code> and <code>C_MULTIPLE_ATTRIBUTE</code> classes.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 S Garde,<br>
 S Kobayashi,<br>
 D Moner,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 Dec 2011</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.0</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>SPEC-270. Add specialisation semantics to ADL and AOM. Add various attributes and functions to <code>ARCHETYPE_CONSTRAINT</code> descendant classes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>move <code>C_PRIMITIVE</code>.<code><em>assumed_value</em></code> to attribute slot in UML</p>
</li>
<li>
<p>rename <code>C_DEFINED_OBJECT</code>.<code><em>default_value</em></code> function to prototype_value</p>
</li>
<li>
<p>correct <code><em>assumed_value</em></code> definition to be like ; remove its entry from all of the <code>C_PRIMITIVE</code> subtypes</p>
</li>
<li>
<p>convert <code>BOOLEAN</code> flag representation of patterns to functions and add a String data member for the pattern value, thus matching the XSDs and ADL</p>
</li>
<li>
<p>add <code>ARCHETYPE</code>.<code><em>is_template</em></code> attribute.</p>
</li>
<li>
<p>add <code>ARCHETYPE</code>.<code><em>is_component</em></code> attribute.</p>
</li>
<li>
<p>allow computed as well as stored attributes.</p>
</li>
<li>
<p>make <code>ONTOLOGY</code>.<code><em>terminologies_available</em></code> computed.</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Dec 2009</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0.9</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>SPEC-263. Change Date, Time etc classes in AOM to _ISO8601`DATE` , _ISO8601`TIME` etc from Support IM.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Jul 2009</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>SPEC-296. Convert <em>Interval&lt;Integer&gt;</em> to <code>MULTIPLICITY_INTERVAL</code> to simplify specification and implementation.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>SPEC-300. Archetype slot regular expressions should cover whole identifier. Added <code>C_STRING</code>.<code><em>is_pattern</em></code> .</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Flinton</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>SPEC-303. Make existence, occurrences and cardinality optional in AOM.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>SPEC-308. Add validity rules to <code>ARCHETYPE_TERMINOLOGY</code> .<br>
SPEC-309. <code>ARCHETYPE_CONSTRAINT</code> adjustments.<br>
SPEC-178. Add template object model to AM.<br></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add <code><em>is_exhaustive</em></code> attribute to <code>ARCHETYPE_SLOT</code> .</p>
</li>
<li>
<p>Add <code><em>is_template</em></code> attribute to <code>ARCHETYPE</code> .</p>
</li>
<li>
<p>Add <code><em>terminology_extracts</em></code> to <code>ARCHETYPE_TERMINOLOGY</code> .</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="4" style="background-color: aqua;"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;1.0.2</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0.2</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>SPEC-257. Correct minor typos and clarify text. Correct reversed definitions of <code><em>is_bag</em></code> and <code><em>is_set</em></code> in <code>CARDINALITY</code> class.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C Ma,<br>
 R Chen,<br>
 T Cook</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Nov 2008</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>SPEC-251. Allow both pattern and interval constraint on Duration in Archetypes. Add pattern attribute to <code>C_DURATION</code> class.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="4" style="background-color: aqua;"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;1.0.1</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>CR-000200. Correct Release 1.0 typographical errors. Table for missed class <code>ASSERTION_VARIABLE</code> added. Assumed_value assertions corrected; <code><em>standard_representation</em></code> function corrected. Added missed <code><em>adl_version</em></code> , <code><em>concept</em></code> rename from CR-000153.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D Lloyd,<br>
 P Pazos,<br>
 R Chen,<br>
 C Ma</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Mar 2007</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>CR-000216: Allow mixture of W, D etc in ISO8601 Duration (deviation from standard).</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>CR-000219: Use constants instead of literals to refer to terminology in RM.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R Chen</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>CR-000232. Relax validity invariant on <code>CONSTRAINT_REF</code> .</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R Chen</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>CR-000233: Define semantics for <code><em>occurrences</em></code> on <code>ARCHETYPE_INTERNAL_REF</code> .</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">K Atalag</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>CR-000234: Correct functional semantics of AOM constraint model package.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>CR-000245: Allow term bindings to paths in archetypes.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="4" style="background-color: aqua;"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;1.0</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>CR-000153. Synchronise ADL and AOM attribute naming.
 CR-000178. Add Template Object Model to AM. Text changes only.
 CR-000167. Add <code>AUTHORED_RESOURCE</code> class. Remove <code><em>description</em></code> package to <code><em>resource</em></code> package in Common IM.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Nov 2005</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="4" style="background-color: aqua;"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;0.96</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.6</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>CR-000134. Correct numerous documentation errors in AOM. Including cut and paste error in <code>TRANSLATION_DETAILS</code> class in <em>Archetype</em> package. Corrected hyperlinks in Section 2.3.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D Lloyd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Jun 2005</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>CR-000142. Update ADL grammar to support assumed values. Changed <code>C_PRIMITIVE</code> and <code>C_DOMAIN_TYPE</code> .</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>CR-000146: Alterations to <em>am.archetype.description</em> from CEN MetaKnow</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D Kalra</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>CR-000138. Archetype-level assertions.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>CR-000157. Fix names of <code>OPERATOR_KIND</code> class attributes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="4" style="background-color: aqua;"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;0.95</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.5.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Corrected documentation error - return type of <code>ARCHETYPE_CONSTRAINT</code> . <code><em>has_path</em></code><br>
add optionality markers to Primitive types UML diagram.<br>
Removed erroneous aggregation marker from <code>ARCHETYPE_ONTOLOGY</code> . <code><em>parent_archetype</em></code> and <code>ARCHETYPE_DESCRIPTION</code> . <code><em>parent_archetype</em></code> .</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D Lloyd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Jan 2005</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.5</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>CR-000110. Update ADL document and create AOM document.<br>
Includes detailed input and review from:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DSTC</p>
</li>
<li>
<p>CHIME, Uuniversity College London</p>
</li>
<li>
<p>Ocean Informatics</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Initial Writing. Taken from ADL document <a href="https://github.com/openEHR/specifications/blob/master/source/am/language/language_design/archetype_language_2v0.7.doc">1.2draft B</a>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale<br>
 A Goodchild<br>
 Z Tun<br>
 T Austin<br>
 D Kalra<br>
 N Lea<br>
 D Lloyd<br>
 S Heard<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Nov 2004</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_trademarks">Trademarks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>'openEHR' is a trademark of the openEHR Foundation</p>
</div>
<div class="paragraph">
<p>'Microsoft' is a trademark of the Microsoft Corporation</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements">Acknowledgements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The work reported in this document was funded by:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ocean Informatics (Australia);</p>
</li>
<li>
<p>University College London (UCL), Centre for Health Informatics and Multi-professional Education (CHIME).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This specification and its sibling Archetype Definition Language specification have benefited from wide formal and informal input from the openEHR and wider health informatics community. The openEHR Foundation would like to recognise the following people and institutions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Koray Atalag, MD, PhD, Sen. Researcher, National Institute for Health Innovation (NIHI), New Zealand</p>
</li>
<li>
<p>Linda Bird PhD, IHTSDO</p>
</li>
<li>
<p>Diego Boscá, IBIME, Technical University Valencia, VeraTech for Health, Spain</p>
</li>
<li>
<p>Rong Chen MD, PhD, Cambio Healthcare Systems, Sweden</p>
</li>
<li>
<p>Borut Fabjan, Program Manager, Marand, Slovenia</p>
</li>
<li>
<p>Sebastian Garde PhD, Ocean Informatics UK</p>
</li>
<li>
<p>Peter Gummer, Ocean Informatics</p>
</li>
<li>
<p>Sam Heard MD, Ocean Informatics</p>
</li>
<li>
<p>Stan Huff MD, Intermountain Healthcare, UT, USA</p>
</li>
<li>
<p>David Ingram PhD, Emeritus Professor of Health Informatics, UCL</p>
</li>
<li>
<p>Dipak Kalra MD, PhD, Professor Health Informatics, CHIME, UCL, president Eurorec</p>
</li>
<li>
<p>Shinji Kobayashi PhD, Kyoto University EHR research unit</p>
</li>
<li>
<p>Bostjan Lah, Architect, Marand, Slovenia</p>
</li>
<li>
<p>David Lloyd, CHIME, UCL (ret)</p>
</li>
<li>
<p>Ian McNicoll MD, Ocean Informatics UK</p>
</li>
<li>
<p>David Moner, IBIME, Technical University Valencia, VeraTech for Health, Spain</p>
</li>
<li>
<p>Pablo Pazos Gutierrez, Tarmac IT, CaboLabs, Uruguay</p>
</li>
<li>
<p>Harold Solbrig, Mayo Clinic, Rochester, USA</p>
</li>
<li>
<p>Erik Sundvall PhD, Linkoping University, Sweden</p>
</li>
<li>
<p>Alessandro Torrisi, Code24, The Netherlands.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose">1.1. Purpose</h3>
<div class="paragraph">
<p>This document contains the normative description of openEHR Archetype and Template semantics (originally described in <a href="#Beale_2000">[Beale_2000]</a> and <a href="#Beale_2002">[Beale_2002]</a>), in the form of an object model. The model presented here can be used as a basis for building software that represents archetypes and templates, independent of their persistent representation. Equally, it can be used to develop the output side of parsers that process archetypes in a linguistic format, such as the <a href="http://www.openehr.org/releases/trunk/architecture/am/adl2.pdf">openEHR Archetype Definition Language (ADL)</a>, XML and so on.</p>
</div>
<div class="paragraph">
<p>It is recommended in any case that the ADL specification be read in conjunction with this document, since it contains a detailed explanation of the semantics of archetypes, and many of the examples are more obvious in ADL, regardless of whether ADL is actually used with the object model presented here or not.</p>
</div>
<div class="paragraph">
<p>The release of AOM described in this specification corresponds to the 2.x version of the archetype formalism.</p>
</div>
</div>
<div class="sect2">
<h3 id="_related_documents">1.2. Related Documents</h3>
<div class="paragraph">
<p>Prerequisite documents for reading this document include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="http://www.openehr.org/releases/trunk/architecture/overview.pdf">openEHR Architecture Overview</a></p>
</li>
<li>
<p>The <a href="http://www.openehr.org/releases/trunk/architecture/am/archetype_technical_overview.pdf">openEHR Archetypes: Technical Overview specification</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Related documents include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The openEHR <a href="http://www.openehr.org/releases/trunk/architecture/am/adl2.pdf">Archetype Definition Language (ADL)</a></p>
</li>
<li>
<p>The <a href="http://www.openehr.org/releases/trunk/architecture/am/templates_guide.pdf">openEHR Operational Template Specification</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_nomenclature">1.3. Nomenclature</h3>
<div class="paragraph">
<p>In this document, the term ‘attribute’ denotes any stored property of a type defined in an object model, including primitive attributes and any kind of relationship such as an association or aggregation. XML ‘attributes’ are always referred to explicitly as ‘XML attributes’.</p>
</div>
<div class="paragraph">
<p>We also use the word ‘archetype’ in a broad sense to designate what are commonly understood to be ‘archetypes’ (specifications of clinical data groups / data constraints) and ‘templates’ (data sets based on archetypes, since at a technical level, an ADL/AOM 2 template is in fact just an archetype. Accordingly, statements about ‘archetypes’ in this specification can be always understood to also apply to templates, unless otherwise indicated.</p>
</div>
</div>
<div class="sect2">
<h3 id="_status">1.4. Status</h3>
<div class="paragraph">
<p>This specification is in the ‘development’ state, and is published for review purposes.</p>
</div>
<div class="paragraph">
<p>The development version of this document can be found at <em><a href="http://www.openehr.org/releases/trunk/architecture/am/aom2.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/am/aom2.pdf</a></em> .</p>
</div>
<div class="paragraph">
<p>Blue text indicates sections under active development.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tools">1.5. Tools</h3>
<div class="paragraph">
<p>Various tools exist for creating and processing archetypes. The openEHR tools are available in source and binary form from the website ( <em><a href="http://www.openEHR.org" class="bare">http://www.openEHR.org</a></em> ).</p>
</div>
</div>
<div class="sect2">
<h3 id="_changes_from_previous_versions">1.6. Changes from Previous Versions</h3>
<div class="sect3">
<h4 id="_release_1_5_to_2_0_document_version_2_1_2">1.6.1. Release 1.5 to 2.0 (Document version 2.1.2 - )</h4>
<div class="paragraph">
<p>The changes in release 2 of the ADL/AOM formalism are designed to make the formalism more computable with respect to terminology, and enable more rigorous validation and flattening operations.</p>
</div>
<div class="paragraph">
<p>The changes are as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduction of <strong>new internal coding scheme</strong>, consisting of id-codes, at-codes and ac-codes;</p>
</li>
<li>
<p>Replace string archetype identifier with multi-part, <strong>namespaced identifier</strong>;</p>
</li>
<li>
<p>Addition of <strong>explicit value-sets</strong> in terminology section, replacing in-line value sets in the <code>definition</code> section;</p>
</li>
<li>
<p>Renaming archetype <code>ontology</code> section to <code>terminology</code>;</p>
</li>
<li>
<p>Expression of all external <strong>term bindings as URIs</strong> following IHTSDO format;</p>
</li>
<li>
<p>Introduction of <strong>‘tuple’ constraints</strong> to replace openEHR custom constrainer types for covarying attributes within Quantity, Ordinal structures;</p>
</li>
<li>
<p>Re-engineering of all primitive constrainer types, i.e. <code>C_STRING</code> , <code>C_DATE</code> etc;</p>
</li>
<li>
<p>Removal of the openEHR Archetype Profile specification.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_release_1_4_to_1_5_document_version_2_0_to_2_1_1">1.6.2. Release 1.4 to 1.5 (Document version 2.0 to 2.1.1)</h4>
<div class="paragraph">
<p>The changes in release 1.5 are made to better facilitate the representation of specialised archetypes. The key semantic capability for specialised archetypes is to be able to support a differential representation, i.e. to express a specialised archetype only in terms of the changed or new elements in its defnition, rather than including a copy of unchanged elements. Doing the latter is clearly unsustainable in terms of change management.</p>
</div>
<div class="paragraph">
<p>The changes are as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Full <strong>specialisation support</strong>: the addition of an attribute to the <code>C_ATTRIBUTE</code> class, allowing the inclusion of a path that enables specialised archetype redefinitions deep within a structure;</p>
</li>
<li>
<p>Addition of <strong>node-level annotations</strong>;</p>
</li>
<li>
<p>Structural simplification of archetype ontology section;</p>
</li>
<li>
<p>The name of the <code>invariant</code> section has been changed to <code>rules</code>, to better reflect its purpose.</p>
</li>
<li>
<p>A template is now just an archetype.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_release_0_6_to_1_4">1.6.3. Release 0.6 to 1.4</h4>
<div class="paragraph">
<p>Changes made from Release 1.3 to 1.4:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>added a new attribute <code><em>adl_version</em></code> : <code>String</code> to the <code>ARCHETYPE</code> class;</p>
</li>
<li>
<p>changed name of <code>ARCHETYPE</code> . <code><em>concept_code</em></code> attribute to <code><em>concept</em></code> .</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_model_overview">2. Model Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The model described here is a pure object-oriented model that can be used with archetype parsers and software that manipulates archetypes and templates in memory. It is typically the output of a parser of any serialsed form of archetypes. It is dependent on the openEHR Base package classes.</p>
</div>
<div class="sect2">
<h3 id="_package_structure">2.1. Package Structure</h3>
<div class="paragraph">
<p>The openEHR Archetype Object Model is defined as the package <code>am.archetype</code> , as illustrated in Figure <a id="package_overview"></a>. It is shown in the context of the openEHR <code>am.archetype</code> packages.</p>
</div>
<div id="package_overview" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="uml_diagrams/AOM-packages.png" alt="AOM packages">
</div>
<div class="title">Figure 1. Package Overview</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_definition_and_utility_classes">3. Definition and Utility Classes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview">3.1. Overview</h3>
<div class="paragraph">
<p>Various definitional classes are used in the AOM. Some are defined in the <code>aom.definitions</code> package, while others come from the openEHR <code>definitions</code> package. These are illustrated below.</p>
</div>
<div id="definition_package" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="uml_diagrams/AOM-definitions.svg" alt="AOM definitions">
</div>
<div class="title">Figure 2. Definition Package</div>
</div>
<div class="paragraph">
<p>The enumeration type <code>VALIDITY_KIND</code> is provided in order to define standard values representing <code>mandatory</code>, <code>optional</code>, or <code>disallowed</code> in any model. It is used in this model in classes such as <code>C_DATE</code> , <code>C_TIME</code> and <code>C_DATE_TIME</code>. The <code>VERSION_STATUS</code> enumeration type serves a similar function within various AOM types.</p>
</div>
<div class="paragraph">
<p>Other classes used from the <code>base</code> package include <code>AUTHORED_RESOURCE</code> (openEHR <code>resource</code> package) and its subordinate classes. These are shown in full within the packages that use them.</p>
</div>
</div>
<div class="sect2">
<h3 id="_class_definitions">3.2. Class Definitions</h3>
<div class="sect3">
<h4 id="_version_status_enumeration">3.2.1. VERSION_STATUS Enumeration</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Enumeration</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>VERSION_STATUS</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Status of a versioned artefact, as one of a number of possible values: uncontrolled, prerelease, release, build.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">alpha</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value representing a version which is ‘unstable’, i.e. contains an unknown size of change with respect to its base version. Rendered with the build number as a string in the form “N.M.P-alpha.B” e.g. “2.0.1-alpha.154”.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">beta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value representing a version which is ‘beta’, i.e. contains an unknown but reducing size of change with respect to its base version. Rendered with the build number as a string in the form “N.M.P-beta.B” e.g. “2.0.1-beta.154”.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">release_candidate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value representing a version which is ‘release candidate’, i.e. contains only patch-level changes on the base version. Rendered as a string as “N.M.P-rc.B” e.g. “2.0.1-rc.27”.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">released</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value representing a version which is ‘released’, i.e. is the definitive base version. Rendered with the build number as a string in the form “N.M.P” e.g. “2.0.1”.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">build</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value representing a version which is a build of the current base release. Rendered with the build number as a string in the form “N.M.P+B” e.g. “2.0.1+33”.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_validity_kind_enumeration">3.2.2. VALIDITY_KIND Enumeration</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Enumeration</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>VALIDITY_KIND</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">An enumeration of three values that may commonly occur in constraint models.<br>
Use as the type of any attribute within this model, which expresses constraint on some attribute in a class in a reference model. For example to indicate validity<br>
of Date/Time fields.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">mandatory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Constant to indicate mandatory presence of something.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Constant to indicate optional presence of something.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">prohibited</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Constant to indicate disallowed presence of something.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_adl_code_definitions_class">3.2.3. ADL_CODE_DEFINITIONS Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>ADL_CODE_DEFINITIONS</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Definitions relating to the internal code system of archetypes.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Id_code_leader</strong>: <code>String&#160;=&#160;"id"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String leader of ‘identifier’ codes, i.e. codes used to identify archteype nodes.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Value_code_leader</strong>: <code>String&#160;=&#160;"at"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String leader of ‘value’ codes, i.e. codes used to identify codes values, including value set members.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Value_set_code_leader</strong>: <code>String&#160;=&#160;"ac"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String leader of ‘value set’ codes, i.e. codes used to identify value sets.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Specialisation_separator</strong>: <code>char&#160;=&#160;'.'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Character used to separate numeric parts of codes belonging to different specialisation levels.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Code_regex_pattern</strong>: <code>String&#160;=&#160;"(0&#124;[1-9][0-9]&#42;)(\.(0&#124;[1-9][0-9]&#42;))&#42;"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regex used to define the legal numeric part of any archetype code. Corresponds to the simple pattern of dotted numbers, as used in typical multi-level numbering schemes.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Root_code_regex_pattern</strong>: <code>String&#160;=&#160;"^id1(\.1)&#42;$"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regex pattern of the root id code of any archetype. Corresponds to codes of the form id1, id1.1, id1.1.1 etc..</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_archetype_package">4. The Archetype Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_2">4.1. Overview</h3>
<div class="paragraph">
<p>The top-level model of archetypes and templates (all variant forms) is illustrated in Figure <a href="#archetype_package">Archetype Package</a>. The model defines a standard structural representation of an archetype. Archetypes authored as independent entities are instances of the class <code>AUTHORED_ARCHETYPE</code> which is a descendant of <code>AUTHORED_RESOURCE</code> and <code>ARCHETYPE</code>. The former provides a standardised model of descriptive meta-data, language information, annotations and revision history for any resource. The latter class defines the core structure of any kind of archetype, including definition, terminology, optional rules part, along with a ‘semantic identifier’ (<code>ARCHETYPE</code>.<code><em>archetype_id</em></code>).</p>
</div>
<div class="paragraph">
<p>The <code>AUTHORED_ARCHETYPE</code> class adds identifying attributes, flags and descriptive meta-data, and is the ancestor type for two further specialisations - <code>TEMPLATE</code> and <code>OPERATIONAL_TEMPLATE</code> . The <code>TEMPLATE</code> class defines the notion of a ‘templated’ archetype, i.e. an archetype containing fillers/references (ADL&#8217;s <code>use_archetype</code> statements), typically designed to represent a data set. To enable this, it may contain ‘overlays’, private archetypes that specialise one or more of the referenced / filler archetypes it uses. Overlays are instances of the <code>TEMPLATE_OVERLAY</code> class, have no meta-data of their own, but are otherwise computationally just like any other archetype.</p>
</div>
<div id="archetype_package" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="uml_diagrams/AOM-archetype.svg" alt="AOM archetype">
</div>
<div class="title">Figure 3. Archetype Package</div>
</div>
<div class="paragraph">
<p>The <code>OPERATIONAL_TEMPLATE</code> class represents the fully flattened form of a template, i.e. with all fillers and references substituted and overlays processed, to form what is in practical terms, a single custom-made ‘operational’ artefact, ready for transformation to downstream artefacts. Because an operational template includes one or more other archetype structures inline, it also includes their terminologies, enabling it to be treated as a self-standing artefact.</p>
</div>
</div>
<div class="sect2">
<h3 id="_archteype_identification">4.2. Archteype Identification</h3>
<div class="sect3">
<h4 id="_human_readable_identifier_hrid">4.2.1. Human-Readable Identifier (HRID)</h4>
<div class="paragraph">
<p>All archetype variants based on <code>ARCHETYPE</code> have a human-readable, structured identifier defined by the <code>ARCHETYPE_HRID</code> class. This identifier places the artefact in a multi-dimensional space based on a namespace, its reference model class and its informational concept. This class defines an atomised representation of the identifier, enabling variant forms to be used as needed. Its various parts can be understood from the following diagram, which also shows the computed <code><em>semantic_id</em></code> and <code><em>physical_id</em></code> forms.</p>
</div>
<div id="archetype_hrid_structure" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/archetype_hrid_structure.png" alt="archetype hrid structure">
</div>
<div class="title">Figure 4. Archetype HRID Structure</div>
</div>
<div class="paragraph">
<p>For specialised archetypes, the <code><em>parent_archetype_id</em></code> is also required. This is a string <code><em>reference</em></code> to an archetype, and is normally the ‘interface’ form of the id, i.e. down to the major version only. In some circumstances, it is useful to include the minor and patch version numbers as well.</p>
</div>
<div class="paragraph">
<p>An important aspect of identification relates to the rules governing when when the HRID namespace changes or is retained, with respect to when ‘moves’ or ‘forks’ occur. Its value is always the same as one of the <code><em>original_namespace</em></code> and <code><em>custodian_namespace</em></code> properties inherited from <code>AUTHORED_RESOURCE</code>.<code><em>description</em></code> (or both, in the case where they are the same). A full explanation of the identification system and rules is given in the openEHR Knowledge Artefact Identification specification.</p>
</div>
</div>
<div class="sect3">
<h4 id="_machine_identifiers">4.2.2. Machine Identifiers</h4>
<div class="paragraph">
<p>Two machine identifiers are defined for archetypes. The <code>ARCHETYPE</code>.<code><em>uid</em></code> attribute defines a machine identifier equivalent to the human readable <code><em>archetype_id</em></code>.<code><em>semantic_id</em></code> , i.e. <code>ARCHETYPE_HRID</code> up to its major version, and changes whenever the latter does. It is defined as optional but to be practically useful would need to be mandatory for all archetypes within a custodian organisation where this identifier was in use. It could in principle be synthesised at any time for a custodian that decided to implement it.</p>
</div>
<div class="paragraph">
<p>The <code>ARCHETYPE</code>.<code><em>build_uid</em></code> attribute is also optional, and if used, is intended to provide a unique identifier that corresponds to any change in version of the artefact. At a minimum, this means generating a new UID for each change to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ARCHETYPE</code>.<code><em>archetype_id</em></code>.<code><em>release_version</em></code>;</p>
</li>
<li>
<p><code>ARCHETYPE</code>.<code><em>archetype_id</em></code>.<code><em>build_count</em></code>;</p>
</li>
<li>
<p><code>ARCHETYPE</code>.<code><em>description</em></code>.<code><em>lifecycle_state</em></code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For every change made to an archetype inside a controlled repository (for example, addition or update of meta-data fields), this field should be updated with a new GUID value, generated in the normal way.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_top_level_meta_data">4.3. Top-level Meta-data</h3>
<div class="paragraph">
<p>The following items correspond to syntax elements that may appear in parentheses in the first line of an ADL archetype.</p>
</div>
<div class="sect3">
<h4 id="_adl_version">4.3.1. ADL Version</h4>
<div class="paragraph">
<p>The <code>ARCHETYPE</code>.<code><em>adl_version</em></code> attribute in ADL 1.4 was used to indicate the ADL release used in the archetype source file from which the AOM structure was created (the version number comes from the revision history of the openEHR ADL specification). In the current and future AOM and ADL specifications, the meaning of this attribute is generalised to mean ‘the version of the archetype formalism’ in which the current archetype is expressed. For reasons of convenience, the version number is still taken from the ADL specification, but now refers to all archetype-related specifications together, since they are always updated in a synchronised fashion.</p>
</div>
</div>
<div class="sect3">
<h4 id="_reference_model_release">4.3.2. Reference Model Release</h4>
<div class="paragraph">
<p>The <code>ARCHETYPE</code>.<code><em>rm_release</em></code> attribute designates the release of the reference model on which the archetype is based, in the archetype’s current version. This means <code><em>rm_release</em></code> can change with new versions of the archetype, where re-versioning includes upgrading the archetype to a later RM release. However, such upgrading still has to obey the basic rule of archetype compatibility: later minor, patch versions and builds cannot create data that is not valid with respect to the prior version.</p>
</div>
<div class="paragraph">
<p>This should be in the same semver.org 3-part form as the <code>ARCHETYPE_HRID</code>.<code><em>release_version</em></code> property, e.g. “1.0.2”. This property does not indicate conformance to any particular reference model version(s) other than the named one, since most archetypes can easily conform to more than one. More minimal archetypes are likely to technically conform to more old and future releases than more complex archteypes.</p>
</div>
</div>
<div class="sect3">
<h4 id="_generated_flag">4.3.3. Generated Flag</h4>
<div class="paragraph">
<p>The <code>ARCHETYPE</code>.<code><em>is_generated</em></code> flag is used to indicate that an archetype has been machine-generated from another artefact, e.g. an older ADL version (say 1.4), or a non-archetype artefact. If true, it indicates to tools that the current archetype can potentially be overwritten, and that some other artefact is considered the primary source. If manual authoring occurs, this attribute should be set to False.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_governance_meta_data">4.4. Governance Meta-data</h3>
<div class="paragraph">
<p>Various meta-data elements are inherited from the <code>AUTHORED_RESOURCE</code> class, and provide the natural language description of the archetype, authoring and translation details, use, misuse, keywords and so on. There are three distinct parts of the meta-data: governance, authorship, and descriptive details.</p>
</div>
<div class="sect3">
<h4 id="_governance_meta_data_items">4.4.1. Governance Meta-data Items</h4>
<div class="paragraph">
<p>Governance meta-data is visible primarily in the <code>RESOURCE_DESCRIPTION</code> class, inherited via <code>AUTHORED_RESOURCE</code>, and consists of items relating to management and intellectual property status of the artefact. A typical form of these is shown in the screenshot in Figure <a href="#metadata_governance">Governance Meta-data</a>.</p>
</div>
<div id="metadata_governance" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="images/metadata_governance.png" alt="metadata governance">
</div>
<div class="title">Figure 5. Governance Meta-data</div>
</div>
<div class="sect4">
<h5 id="_package">Package</h5>
<div class="paragraph">
<p>The optional <code><em>resource_package_uri</em></code> property enables the recording of a reference to a package of archetypes or other resources, to which this archetype is considered to below. It may be in the form of ‘text &lt;URL&gt;’.</p>
</div>
</div>
<div class="sect4">
<h5 id="_lifecycle_state">Lifecycle_state</h5>
<div class="paragraph">
<p>The <code><em>description</em></code>.<code><em>lifecycle_state</em></code> is an important property of an archetype, which is used to record its state in a defined lifecycle. The lifecycle state machine and versioning rules are explained fully in the <a href="http://www.openehr.org/releases/trunk/architecture/am/knowledge_id_system.pdf">openEHR Knowledge Artefact Identification specification</a>. Here we simply note that the value of the property is a coded term corresponding to one of the macro-state names on the diagram, i.e. ‘unmanaged’, ‘in_development’, and so on.</p>
</div>
</div>
<div class="sect4">
<h5 id="_original_namespace_and_original_publisher">Original_namespace and Original_publisher</h5>
<div class="paragraph">
<p>These two optional properties indicate the original publishing organisation, and its namespace, i.e. the original publishing environment where the artefact was first imported or created. The <code><em>original_namespace</em></code> property is normally the same value as <code><em>archetype_id</em></code>.<code><em>namespace</em></code>,unless the artefact has been forked into its current custodian, in which case <code><em>archetype_id</em></code>.<code><em>namespace</em></code> will be the same as <code><em>custodian_namespace</em></code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_custodian_namespace_and_custodian_organisation">Custodian_namespace and Custodian_organisation</h5>
<div class="paragraph">
<p>These two optional properties state a formal namespace, and a human-readable organisation identifier corresponding to the current custodian, i.e. maintainer and publisherof the artefact, if there is one.</p>
</div>
</div>
<div class="sect4">
<h5 id="_intellectual_property_items">Intellectual Property Items</h5>
<div class="paragraph">
<p>There are three properties in the class that <code>RESOURCE_DESCRIPTION</code> relate to intellectual property (IP). Licence is a String field for recording of the licence (US: ‘license’) under which the artefact can be used. The recommended format is</p>
</div>
<div class="listingblock">
<div class="content">
<pre>licence name &lt;reliable URL to licence statement&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The copyright property records the copyright applying to the artefact, and is normally in the standard form ‘(c) name’ or ‘(c) year name’. The special character © may also be used (UTF-8 0xC2A9).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_authorship_meta_data">4.4.2. Authorship Meta-data</h4>
<div class="paragraph">
<p>Authorship meta-data consists of items such as author name, contributors, and translator information, and is visualised in Figure <a href="#metadata_authoring">Authoring Meta-data</a>.</p>
</div>
<div id="metadata_authoring" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="images/metadata_authoring.png" alt="metadata authoring">
</div>
<div class="title">Figure 6. Authoring Meta-data</div>
</div>
<div class="sect4">
<h5 id="_original_author">Original Author</h5>
<div class="paragraph">
<p>The <code>RESOURCE_DESCRIPTION</code>.<code><em>original_author</em></code> property defines a simple list of name/value pairs via which the original author can be documented. Typical key values include ‘name’, ‘organi[zs]ation’, ‘email’ and ‘date’.</p>
</div>
</div>
<div class="sect4">
<h5 id="_contributors">Contributors</h5>
<div class="paragraph">
<p>The <code>RESOURCE_DESCRIPTION</code>.<code><em>other_contributors</em></code> property is a simple list of strings, one for each contributor. The recommended format of the string is one of:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>first names last name, organisation
first names last name, organisation &lt;contributor email address&gt;
first names last name, organisation &lt;organisation email address&gt;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_languages_and_translation">Languages and Translation</h5>
<div class="paragraph">
<p>The <code>AUTHORED_RESOURCE</code>.<code><em>original_language</em></code> and <code>TRANSLATION_DETAILS</code> class enable the original language of authoring and information relating to subsequent translations to be expressed. <code>TRANSLATION_DETAILS</code>.<code><em>author</em></code> allows each translator to be represented in the same way as the <code><em>original_author</em></code> , i.e. a list of name/values. The <code><em>version_last_translated</em></code> property is used to record a copy of the archetype_id.physical_id for each language, when the translation was carried out. This enables maintainers to know when new translations are needed for some or all languages.</p>
</div>
</div>
<div class="sect4">
<h5 id="_version_last_translated">Version_last_translated</h5>
<div class="paragraph">
<p>This String property records the full version identifier (i.e. <code>ARCHETYPE</code>.<code><em>archetype_id</em></code>.<code><em>version_id</em></code>) at the time of last translation, enabling tools to determine if and when translations may be out of date.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_descriptive_meta_data">4.4.3. Descriptive Meta-data</h4>
<div class="paragraph">
<p>Various descriptive meta-data may be provided for an archetype in multiple translations in the <code>RESOURCE_DESCRIPTION_ITEM</code> class, using one instance for each translation language, as shown in Figure <a href="#metadata_descriptive">Descriptive Meta-data</a>.</p>
</div>
<div id="metadata_descriptive" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="images/metadata_details.png" alt="metadata details">
</div>
<div class="title">Figure 7. Descriptive Meta-data</div>
</div>
<div class="sect4">
<h5 id="_purpose_2">Purpose</h5>
<div class="paragraph">
<p>The <code><em>purpose</em></code> item is a String property for recording the intended design concept of the artefact.</p>
</div>
</div>
<div class="sect4">
<h5 id="_use_and_misuse">Use and Misuse</h5>
<div class="paragraph">
<p>The <code><em>use</em></code> and <code><em>misuse</em></code> properties enable specific uses and misuses to be documented. The latter normally relate to common errors of use, or apparently reasonable but wrong assumptions about use.</p>
</div>
</div>
<div class="sect4">
<h5 id="_keywords">Keywords</h5>
<div class="paragraph">
<p>The <code><em>keywords</em></code> property is a list of Strings designed to record search keywords for the artefact.</p>
</div>
</div>
<div class="sect4">
<h5 id="_resources">Resources</h5>
<div class="paragraph">
<p>The <code><em>original_resource_uri</em></code> property is used to record one or more references to resources in each particular language.</p>
</div>
<div class="paragraph tbd">
<p><em>TBD</em>: This property does not appear to have ever been used, and it may not be useful, since ‘resources’ are not typically available for each language.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_structural_definition">4.5. Structural Definition</h3>
<div class="sect3">
<h4 id="_common_structural_parts">4.5.1. Common Structural Parts</h4>
<div class="paragraph">
<p>The archetype definition is the main definitional part of an archetype and is an instance of a <code>C_COMPLEX_OBJECT</code> . This means that the root of the constraint structure of an archetype always takes the form of a constraint on a non-primitive object type.</p>
</div>
<div class="paragraph">
<p>The terminology section of an archetype is represented by its own classes, and is what allows archetypes to be natural language- and terminology-neutral. It is described in detail in the <a href="#terminology_package">Terminology Package</a>.</p>
</div>
<div class="paragraph">
<p>An archetype may include one or more rules. Rules are statements expressed in a subset of predicate logic, which can be used to state constraints on multiple parts of an object. They are not needed to constrain single attributes or objects (since this can be done with an appopriate <code>C_ATTRIBUTE</code> or <code>C_OBJECT</code> ), but are necessary for constraints referring to more than one attribute, such as a constraint that ‘systolic pressure should be &gt;= diastolic pressure’ in a blood pressure measurement archetype. They can also be used to declare variables, including external data query results, and make other constraints dependent on a variable value, e.g. the gender of the record subject.</p>
</div>
<div class="paragraph">
<p>Lastly, annotations and revision history sections, inherited from the <code>AUTHORED_RESOURCE</code> class, can be included as required. The annotations section is of particular relevance to archetypes and templates, and is used to document individual nodes within an archetype or template, and/or nodes in reference model data, that may not be constrained in the archetype, but whose specific use in the archetyped data needs to be documented. In the former case, the annotations are keyed by an archetype path, while in the latter case, by a reference model path.</p>
</div>
</div>
<div class="sect3">
<h4 id="_structural_variants">4.5.2. Structural Variants</h4>
<div class="paragraph">
<p>The model in Figure <a href="#archetype_package">Archetype Package</a> defines the structures of a number of variants of the ‘archetype’ idea. All concrete instances are instances of one of the concrete descendants of <code>ARCHETYPE</code>. Figure <a href="#source_archetype_structure">Source Archetype Structure</a> illustrates the typical object structure of a source archetype - the form of archetype created by an authoring tool - represented by a <code>DIFFERENTIAL_ARCHETYPE</code> instance. Mandatory parts are shown in bold.</p>
</div>
<div id="source_archetype_structure" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="uml_diagrams/AOM-source_archetype_structure.svg" alt="AOM source archetype structure">
</div>
<div class="title">Figure 8. Source Archetype Structure</div>
</div>
<div class="paragraph">
<p>Source archetypes can be specialised, in which case their definition structure is a partial overlay on the flat parent, or ‘top-level’, in which case the definition structure is complete. <code>C_ARCHETYPE_ROOT</code> instances may only occur representing direct references to other archetypes - ‘external references’.</p>
</div>
<div class="paragraph">
<p>A flat archetype is generated from one or more source archetypes via the flattening process described in the next chapter of this specification, (also in the ADL specification). This generates a <code>FLAT_ARCHETYPE</code> from a <code>DIFFERENTIAL_ARCHETYPE</code> instance. The main two changes that occur in this operation are a) specialised archetype overlays are applied to the flat parent structure, resulting in a full archetype structure, and b) internal references (use_nodes) are replaced by their expanded form, i.e. a copy of the subtrees to which they point.</p>
</div>
<div id="source_template_structure" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="uml_diagrams/AOM-source_template_structure.svg" alt="AOM source template structure">
</div>
<div class="title">Figure 9. Source Template Structure</div>
</div>
<div class="paragraph">
<p>This form is used to represent the full ‘operational’ structure of a specialised archetype, and has two uses. The first is to generate backwards compatible ADL 1.4 legacy archetypes (always in flat form); the second is during the template flattening process, when the flat forms of all referenced archetypes and templates are ultimately combined into a single operational template.</p>
</div>
<div class="paragraph">
<p>Figure <a href="#source_template_structure">Source Template Structure</a> illustrates the structure of a source template, i.e instances of <code>TEMPLATE</code>. A source template is an archetype containing <code>C_ARCHETYPE_ROOT</code> objects representing slot fillers - each referring to an external archetype or template, or potentially an overlay archetype.</p>
</div>
<div class="paragraph">
<p>Another archetype variant, also shown in <a href="#source_template_structure">Source Template Structure</a> is the template overlay, i.e. an instance of <code>TEMPLATE_OVERLAY</code>. These are purely local components of templates, and include only the definition and terminology. The definition structure is always a specialised overlay on something else, and may not contain any slot fillers or external references, i.e. no <code>C_ARCHETYPE_ROOT</code> objects. No identifier, adl_version, languages or description are required, as they are considered to be propagated from the owning root template. Accordingly, template overlays act like a simplified specialised archetype. Template overlays can be thought of as being similar to ‘anonymous’ or ‘inner’ classes in some object-oriented programming languages.</p>
</div>
<div class="paragraph">
<p>Figure <a href="#operational_template_structure">Operational Template Structure</a> illustrates the resulting operational template, or compiled form of a template. This is created by building the composition of referenced archetypes and/or templates and/or template overlays, in their flattened form, to generate a single ‘giant’ archetype. The root node of this archetype, along with every archetype/template root node within, is represented using a <code>C_ARCHETYPE_ROOT</code> object. An operational template also has a component_terminologies property containing the ontologies from every constituent archetype, template and overlay.</p>
</div>
<div id="operational_template_structure" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="uml_diagrams/AOM-operational_template_structure.svg" alt="AOM operational template structure">
</div>
<div class="title">Figure 10. Operational Template Structure</div>
</div>
<div class="paragraph">
<p>More details of template development, representation and semantics are described in the next section.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions">4.6. Class Descriptions</h3>
<div class="sect3">
<h4 id="_archetype_class">4.6.1. ARCHETYPE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong><em>ARCHETYPE (abstract)</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">The ARCHETYPE class defines the core formal model of the root object of any archetype or template. It includes only basic identification information, and otherwise provides the structural connections from the Archetype to its constituent parts, i.e. definition (a C_COMPLEX_OBJECT), terminology (ARCHEYTPE_TERMINOLOGY) and so on. <br>
It is the parent class of all concrete types of archetype.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>parent_archetype_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Archetype reference of the specialisation par-ent of this archetype, if applicable. May take the form of an archetype interface identifier, i.e. the identifier up to the major version only, or can be deeper.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>archetype_id</strong>: <code>ARCHETYPE_HRID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifier of this archetype.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_differential</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag indicating whether this archetype is differential or flat in its contents. Top-level source archetypes have this flag set to True.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>definition</strong>: <code>C_COMPLEX_OBJECT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Root node of the definition of this archetype.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>terminology</strong>: <code>ARCHETYPE_TERMINOLOGY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The terminology of the archetype.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rules</strong>: <code>List&lt;RULE_STATEMENT&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rules relating to this archetype. Statements are expressed in first order predicate logic, and usually refer to at least two attributes.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>concept_code</strong>: <code>String</code><br>
<strong><em>post-condition</em></strong>: Result.is_equal (definition.node_id)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The concept code of the root object of the archetype, also standing for the concept of the archetype as a whole.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>physical_paths</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set of language-independent paths extracted from archetype. Paths obey Xpath-like syntax and are formed from alternations of C_OBJECT.node_id and C_ATTRIBUTE.rm_attribute_name values.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>logical_paths</strong> (lang: <code>String</code>): <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set of language-dependent paths extracted from archetype. Paths obey the same syntax as physical_paths, but with node_ids replaced by their meanings from the ontology.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>specialisation_depth</strong>: <code>Integer</code><br>
<strong><em>post-condition</em></strong>: Result = terminology.specialisation_depth</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specialisation depth of this archetype; larger than 0 if this archetype has a parent. Derived from terminology.specialisation_depth.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_specialised</strong>: <code>Boolean</code><br>
<strong><em>post-condition</em></strong>: Result implies parent_archetype_hrid /= Void</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if this archetype is a specialisation of another.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Invariant</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Invariant_concept_valid</em></strong>: terminology.has_term_code (concept_code)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Invariant_specialisation_validity</em></strong>: is_specialised implies specialisation_depth &gt; 0</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_authored_archetype_class">4.6.2. AUTHORED_ARCHETYPE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>AUTHORED_ARCHETYPE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Root object of a standalone, authored archetype, including all meta-data, description, other identifiers and lifecycle.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">ARCHETYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>adl_version</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADL version if archetype was read in from an ADL sharable archetype.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>build_uid</strong>: <code>UID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique identifier of this archetype artefact instance. A new identifier is assigned every time the content is changed by a tool. Used by tools to distinguish different revisions and/or interim snapshots of the same artefact.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rm_release</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Semver.org compatible release of the most recent reference model release on which the archetype in its current version is based. This does not imply conformance only to this release, since an archetype may be valid with respect to multiple releases of a reference model.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_generated</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If True, indicates that this artefact was machine-generated from some other source, in which case, tools would expect to overwrite this artefact on a new generation. Editing tools should set this value to False when a user starts to manually edit an archetype.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>other_meta_data</strong>: <code>Hash&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Invariant</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Invariant_adl_version_validity</em></strong>: valid_version_id (adl_version)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Invariant_rm_release</em></strong>: valid_version_id (rm_release)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_archetype_hrid_class">4.6.3. ARCHETYPE_HRID Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>ARCHETYPE_HRID</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Human_readable structured identifier (HRID) for an archetype or template.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>namespace</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reverse domain name namespace identifier.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rm_publisher</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the Reference Model publisher.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rm_package</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the package in whose reachability graph the rm_class class is found (there can be more than one possibility in many reference models).</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rm_class</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the root class of this archetype.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>concept_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The short concept name of the archetype as used in the multi-axial archetype_hrid.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>release_version</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The full numeric version of this archetype consisting of 3 parts, e.g. 1.8.2. The archetype_hrid feature includes only the major version.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>version_status</strong>: <code>VERSION_STATUS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The status of the version, i.e. released, release_candidate etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>build_count</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The build count since last increment of any version part.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>semantic_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ‘interface’ form of the HRID, i.e. down to the major version.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>physical_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ‘physical’ form of the HRID, i.e. with complete version information.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>version_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full version identifier string, based on release_version and lifecycle, e.g. 1.8.2-rc.4.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>major_version</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Major version of this archetype, extracted from release_version.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>minor_version</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minor version of this archetype, extracted from release_version.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>patch_version</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Patch version of this archetype, extracted from release_version. Equivalent to patch version in patch version in semver.org sytem.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Invariant</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Inv_rm_publisher_validity</em></strong>: not rm_publisher.is_empty</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Inv_rm_package_validity</em></strong>: not rm_package.is_empty</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Inv_class_name_validity</em></strong>: not rm_class.is_empty</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Inv_concept_id_validity</em></strong>: not concept_id.is_empty</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Inv_release_version_validity</em></strong>: valid_version (release_version)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_template_class">4.6.4. TEMPLATE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>TEMPLATE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Class representing source template, i.e. a kind of archetype that may include template overlays, and may be restricted by tools to only defining mandations, prohibitions, and restrictions on elements already defined in the flat parent.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">AUTHORED_ARCHETYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>overlays</strong>: <code>List&lt;TEMPLATE_OVERLAY&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Overlay archetypes, i.e. partial archetypes that include full definition and terminology, but logically derive all their meta-data from from the owning template.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Invariant</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Inv_is_specialised</em></strong>: is_specialised</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_template_overlay_class">4.6.5. TEMPLATE_OVERLAY Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>TEMPLATE_OVERLAY</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">A concrete form of the bare ARCHETYPE class, used to represent overlays in a source template. Overlays have no meta-data of their own, and are instead docu-mented by their owning template.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">ARCHETYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Invariant</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Inv_is_specialised</em></strong>: is_specialised</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_operational_template_class">4.6.6. OPERATIONAL_TEMPLATE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>OPERATIONAL_TEMPLATE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Root object of an operational template. An operational template is derived from a TEMPLATE definition and the ARCHETYPEs and/or TEMPLATE_OVERLAYs mentioned by that template by a process of flattening, and potentially removal of unneeded languages and terminologies.<br>
An operational template is used for generating and validating canonical openEHR data, and also as a source artefact for generating other downstream technical artefacts, including XML schemas, APIs and UI form definitions.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">AUTHORED_ARCHETYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>component_terminologies</strong>: <code>Hash&lt;ARCHETYPE_TERMINOLOGY, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compendium of flattened terminologies of archetypes externally referenced from this archetype, keyed by archetype identifier. This will almost always be present in a template.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>terminology_extracts</strong>: <code>Hash&lt;ARCHETYPE_TERMINOLOGY, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory of term definitions as a two-level  table. The outer hash keys are term codes,  e.g. "at4", and the inner hash key are term  attribute names, e.g. "text", "description" etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>component_terminology</strong> (an_id: <code>String</code>): <code>ARCHETYPE_TERMINOLOGY</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Invariant</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Specialisation_validity</em></strong>: is_specialised</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_validity_rules">4.7. Validity Rules</h3>
<div class="paragraph">
<p>The following validity rules apply to all varieties of <code>ARCHETYPE</code> object:</p>
</div>
<div class="paragraph rule">
<p><strong>VARAV</strong>: ADL version validity. The <code><em>adl_version</em></code> top-level meta-data item must exist and consist of a valid 3-part version identifier.</p>
</div>
<div class="paragraph rule">
<p><strong>VARRV</strong>: RM release validity. The <code><em>rm_release</em></code> top-level meta-data item must exist and consist of a valid 3-part version identifier.</p>
</div>
<div class="paragraph rule">
<p><strong>VARCN</strong>: archetype concept validity. The node_id of the root object of the archetype must be of the form id1\{.1}*, where the number of ‘.1’ components equals the specalisation depth, and must be defined in the terminology.</p>
</div>
<div class="paragraph rule">
<p><strong>VATDF</strong>: value code validity. Each value code (at-code) used in a term constraint in the archetype definition must be defined in the term_definitions part of the terminology of the flattened form of the current archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VACDF</strong>: constraint code validity. Each value set code (ac-code) used in a term constraint in the archetype definition must be defined in the term_definitions part of the terminology of the current archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VATDA</strong>: value set assumed value code validity. Each value code (at-code) used as an assumed_value for a value set in a term constraint in the archetype definition must exist in the value set definition in the terminology for the identified value set.</p>
</div>
<div class="paragraph rule">
<p><strong>VETDF</strong>: external term validity. Each external term used within the archetype definition must exist in the relevant terminology (subject to tool accesibility; codes for inaccessible terminologies should be flagged with a warning indicating that no verification was possible).</p>
</div>
<div class="paragraph rule">
<p><strong>VOTM</strong>: terminology translations validity. Translations must exist for term_definitions and constraint_definitions sections for all languages defined in the description / translations section.</p>
</div>
<div class="paragraph rule">
<p><strong>VOKU</strong>: object key unique. Within any keyed list in an archetype, including the desription, terminology, and annotations sections, each item must have a unique key with respect to its siblings.</p>
</div>
<div class="paragraph rule">
<p><strong>VARDT</strong>: archetype definition typename validity. The typename mentioned in the outer block of the archetype definition section must match the type mentioned in the first segment of the archetype id.</p>
</div>
<div class="paragraph rule">
<p><strong>VRANP</strong>: annotation path valid. Each path mentioned in an annotation within the annotations section must either be a valid archetype path, or a ‘reference model’ path, i.e. a path that is valid for the root class of the archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VRRLP</strong>: rule path valid. Each path mentioned in a rule in the rules section must be found within the archetype, or be an RM-valid extension of a path found within the archetype.</p>
</div>
<div class="paragraph">
<p>The following validity rules apply to <code>ARCHETYPE</code> objects for which <code><em>is_overlay</em></code> = False:</p>
</div>
<div class="paragraph rule">
<p><strong>VARID</strong>: archetype identifier validity. The archetype must have an identifier that conforms to the openEHR specification for archetype identifiers.</p>
</div>
<div class="paragraph rule">
<p><strong>VDEOL</strong>: original language specified. An <code>original_language</code> section containing the meta-data of the original authoring language must exist.</p>
</div>
<div class="paragraph rule">
<p><strong>VARD</strong>: description specified. A description section containing the main meta-data of the archetype must exist.</p>
</div>
<div class="paragraph">
<p>The following rules apply to specialised archetypes.</p>
</div>
<div class="paragraph rule">
<p><strong>VASID</strong>: archetype specialisation parent identifier validity. The archetype identifier stated in the specialise clause must be the identifier of the immediate specialisation parent archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VALC</strong>: archetype language conformance. The languages defined in a specialised archetype must be the same as or a subset of those defined in the flat parent.</p>
</div>
<div class="paragraph rule">
<p><strong>VACSD</strong>: archetype concept specialisation depth. The specialisation depth of the concept code must be one greater than the specialisation depth of the parent archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VATCD</strong>: archetype code specialisation level validity. Each archetype term (‘at’ code) and constraint code (‘ac’ code) used in the archetype definition part must have a specialisation level no greater than the specialisation level of the archetype.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_constraint_model_package">5. Constraint Model Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_3">5.1. Overview</h3>
<div class="paragraph">
<p>Figure <a id="constraint_model_top"></a> and Figure <a id="constraint_model_bottom"></a> illustrate the object model of constraints used in an archetype definition. This model is completely generic, and is designed to express the semantics of constraints on instances of classes which are themselves described in any orthodox object-oriented formalism, such as UML. Accordingly, the major abstractions in this model correspond to major abstractions in object-oriented formalisms, including several variations of the notion of ‘object’ and the notion of ‘attribute’. The notion of ‘object’ rather than ‘class’ or ‘type’ is used because archetypes are about constraints on data (i.e. ‘instances’, or ‘objects’) rather than models, which are constructed from ‘classes’. In this document, the word ‘attribute’ refers to any data property of a class, regardless of whether regarded as a ‘relationship’ (i.e. association, aggregation, or composition) or ‘primitive’ (i.e. value) attribute in an object model.</p>
</div>
<div id="constraint_model_top" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="uml_diagrams/AOM-constraint_model-top.svg" alt="AOM constraint model top">
</div>
<div class="title">Figure 11. constraint_model Package</div>
</div>
<div class="paragraph">
<p>The definition part of an archetype is an instance of a <code>C_COMPLEX_OBJECT</code> and consists of alternate layers of object and attribute constrainer nodes, each containing the next level of nodes. At the leaves are primitive object constrainer nodes constraining primitive types such as <code>String</code> , <code>Integer</code> etc. There are also nodes that represent internal references to other nodes, constraint reference nodes that refer to a text constraint in the constraint binding part of the archetype terminology, and archetype constraint nodes, which represent constraints on other archetypes allowed to appear at a given point. The full list of concrete node types is as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>C_COMPLEX_OBJECT</code> : any interior node representing a constraint on instances of some non-primitive type, e.g. <code>OBSERVATION</code> , <code>SECTION</code> ;</p>
</li>
<li>
<p><code>C_ATTRIBUTE</code> : a node representing a constraint on an attribute (i.e. UML ‘relationship’ or ‘primitive attribute’) in an object type;</p>
</li>
<li>
<p><code>C_PRIMITIVE_OBJECT</code> : an node representing a constraint on a primitive (built-in) object type;</p>
</li>
<li>
<p><code>C_COMPLEX_OBJECT_PROXY</code> : a node that refers to a previously defined <code>C_COMPLEX_OBJECT</code> node in the same archetype. The reference is made using a path;</p>
</li>
<li>
<p><code>ARCHETYPE_SLOT</code> : a node whose statements define a constraint that determines which other archetypes can appear at that point in the current archetype. It can be thought of like a keyhole, into which few or many keys might fit, depending on how specific its shape is. Logically it has the same semantics as a <code>C_COMPLEX_OBJECT</code> , except that the constraints are expressed in another archetype, not the current one.</p>
</li>
<li>
<p><code>C_ARCHETYPE_ROOT</code> : stands for the root node of an archetype; enables another archetype to be referenced from the present one. Used in both archetypes and templates.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The constraints define which configurations of reference model class instances are considered to conform to the archetype. For example, certain configurations of the classes <code>PARTY</code> , <code>ADDRESS</code> , <code>CLUSTER</code> and <code>ELEMENT</code> might be defined by a Person archetype as allowable structures for ‘people with identity, contacts, and addresses’. Because the constraints allow optionality, cardinality and other choices, a given archetype usually corresponds to a set of similar configurations of objects.</p>
</div>
<div id="constraint_model_bottom" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="uml_diagrams/AOM-constraint_model-bottom.svg" alt="AOM constraint model bottom">
</div>
<div class="title">Figure 12. constraint_model.primitive Package</div>
</div>
<div class="paragraph">
<p>The type-name nomenclature <code>C_XXX</code> used here is intended to be read as “constraint on objects of type <code>XXXX</code> ”, i.e. a <code>C_COMPLEX_OBJECT</code> is a “constraint on a complex object (defined by a complex reference model type)”. These type names are used below in the formal model.</p>
</div>
</div>
<div class="sect2">
<h3 id="_semantics">5.2. Semantics</h3>
<div class="paragraph">
<p>The effect of the model is to create archetype description structures that are a hierarchical alternation of object and attribute constraints. This structure can be seen by inspecting an ADL archetype, or by viewing an archetype in the openEHR ADL workbench <a href="AOM2.htm#50487307_29116">See openEHR. EHR Reference Model. See <a href="http://www.openehr.org/repositories/spec-dev/latest/publishing/architecture/top.html" class="bare">http://www.openehr.org/repositories/spec-dev/latest/publishing/architecture/top.html</a>.</a>, and is a direct consequence of the object-oriented principle that classes consist of properties, which in turn have types that are classes. (To be completely correct, types do not always correspond to classes in an object model, but it does not make any difference here). The repeated object/attribute hierarchical structure of an archetype provides the basis for using paths to reference any node in an archetype. Archetype paths follow a syntax that is a directly convertible in and out of the W3C Xpath syntax.</p>
</div>
<div class="sect3">
<h4 id="_all_node_types">5.2.1. All Node Types</h4>

</div>
</div>
<div class="sect2">
<h3 id="_path_functions">5.3. Path Functions</h3>
<div class="paragraph">
<p>A small number of properties are defined for all node types. The path feature computes the path to the current node from the root of the archetype, while the has_path function indicates whether a given path can be found in an archetype.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conformance_functions">5.4. Conformance Functions</h3>
<div class="paragraph">
<p>All node types include two functions that formalise the notion of conformance of a specialised archetype to a parent archetype. Both functions take an argument which must be a corresponding node in a parent archetype, not necessarily the immediate parent. A ‘corresponding’ node is one found at the same or a congruent path. A congruent path is one in which one or more at-codes have been redefined in the specialised archetype.</p>
</div>
<div class="paragraph">
<p>The <code><em>c_conforms_to</em></code> function returns True if the node on which it is called is a valid specialisation of the ‘other’ node. The <code><em>c_congruent_to</em></code> function returns True if the node on which it is called is the same as the other node, with the possible exception of a redefined at-code. The latter may happen due to the need to restrict the domain meaning of node to a meaning narrower than that of the same node in the parent. The formal semantics of both functions are given in the section <a href="AOM2.htm#50487317_85899">See Class Definitions</a>.</p>
</div>
<div class="sect3">
<h4 id="_attribute_node_types">5.4.1. Attribute Node Types</h4>
<div class="paragraph">
<p>Constraints on reference model attributes, including computed attributes (represented by functions with no aguments in most programming languages), are represented by instances of <code>C_ATTRIBUTE</code> . The expressible constraints include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>is_multiple</em></code>: a flag that indicates whether the <code>C_ATTRIBUTE</code> is constraining a multiply-valued (i.e. container) RM attribute or a single-valued one;</p>
</li>
<li>
<p><code><em>existence</em></code>: whether the corresponding instance (defined by the <code><em>rm_attribute_name</em></code> attribute) must exist;</p>
</li>
<li>
<p>child objects: representing allowable values of the object value(s) of the attribute.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the case of single-valued attributes (such as Person.date_of_birth) the children represent one or more alternative object constraints for the attribute value.</p>
</div>
<div class="paragraph">
<p>For multiply-valued attributes (such as <code>Person</code>.<code><em>contacts</em></code>: <code>List&lt;Contact&gt;</code>), a cardinality constraint on the container can be defined. The constraint on child objects is essentially the same except that more than one of the alternatives can co-exist in the data. Figure <a href="#c_attributes">C_ATTRIBUTE variants</a> illustrates the two possibilities.</p>
</div>
<div class="paragraph">
<p>The appearance of both <code><em>existence</em></code> and <code><em>cardinality</em></code> constraints in <code>C_ATTRIBUTE</code> deserves some explanation, especially as the meanings of these notions are often confused in object-oriented literature. An existence constraint indicates whether an object will be found in a given attribute field, while a cardinality constraint indicates what the valid membership of a container object is. <code><em>Cardinality</em></code> is only required for container objects such as <code>List&lt;T&gt;</code> , <code>Set&lt;T&gt;</code> and so on, whereas <code><em>existence</em></code> is always possible. If both are used, the meaning is as follows: the existence constraint says whether the container object will be there (at all), while the cardinality constraint says how many items must be in the container, and whether it acts logically as a list, set or bag. Both existence and cardinality are optional in the model, since they are only needed to override the settings from the reference model.</p>
</div>
<div id="c_attributes" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/c_attributes.png" alt="c attributes">
</div>
<div class="title">Figure 13. C_ATTRIBUTE variants</div>
</div>
</div>
<div class="sect3">
<h4 id="_object_node_types">5.4.2. Object Node Types</h4>
<div class="sect4">
<h5 id="_node_id_and_paths">Node_id and Paths</h5>
<div class="paragraph">
<p>The node_id attribute in the class <code>C_OBJECT</code> , inherited by all subtypes, is of key importance in the archetype constraint model. It has two functions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it allows archetype object constraint nodes to be individually identified, and in particular, guarantees sibling node unique identification;</p>
</li>
<li>
<p>it provides a code to which a human-understanding terminology definition can be attached, as well as potentially a terminology binding.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The existence of <code><em>node_ids</em></code> in an archetype allows archetype paths to be created, which refer to each node. Every node in the archetype needs a <code><em>node_id</em></code> , but only node_ids for nodes under container attributes must have a terminology definition. For nodes under single-valued attributes, the terminology definition is optional (and typically not supplied), since the meaning is given by the reference model attribute definition.</p>
</div>
</div>
<div class="sect4">
<h5 id="_sibling_ordering">Sibling Ordering</h5>
<div class="paragraph">
<p>Within a specialised archetype, redefined or added object nodes may be defined within a container attribute. Since specialised archetypes are in differential form, i.e. only redefined or added nodes are expressed, not nodes inherited unchanged, the relative ordering of siblings can’t be stated simply by the ordering of such items within the relevant list within the differential form of the archetype. An explicit ordering indicator is required if indeed order is specific. The <code>C_OBJECT</code> . <code><em>sibling_order</em></code> attribute provides this possibility. It can only be set on a <code>C_OBJECT</code> descendant within a multiply-valued attribute, i.e. an instance of <code>C_ATTRIBUTE</code> for which the cardinality is ordered.</p>
</div>
</div>
<div class="sect4">
<h5 id="_defined_object_nodes_c_defined_object">Defined Object Nodes (C_DEFINED_OBJECT)</h5>
<div class="paragraph">
<p>The <code>C_DEFINED_OBJECT</code> subtype corresponds to the category of <code>C_OBJECTs</code> that are defined in an archetype by value, i.e. by inline definition. Four properties characterise <code>C_DEFINED_OBJECT</code> s as follows.</p>
</div>
</div>
<div class="sect4">
<h5 id="_valid_value">Valid_value</h5>
<div class="paragraph">
<p>The <code><em>valid_value</em></code> function tests a reference model object for conformance to the archetype. It is designed for recursive implementation in which a call to the function at the top of the archetype definition would cause a cascade of calls down the tree. This function is the key function of an ‘archetype-enabled kernel’ component that can perform runtime data validation based on an archetype definition.</p>
</div>
</div>
<div class="sect4">
<h5 id="_prototype_value">Prototype_value</h5>
<div class="paragraph">
<p>This function is used to generate a reasonable default value of the reference object being constrained by a given node. This allows archteype-based software to build a ‘prototype’ object from an archetype which can serve as the initial version of the object being constrained, assuming it is being created new by user activity (e.g. via a GUI application). Implementation of this function will usually involve use of reflection libraries or similar.</p>
</div>
</div>
<div class="sect4">
<h5 id="_default_value">Default_value</h5>
<div class="paragraph">
<p>This attribute allows a user-specified default value to be defined within an archetype. The <code><em>default_value</em></code> object must be of the same type as defined by the <code><em>prototype_value</em></code> function, pass the <code><em>valid_value</em></code> test. Where defined, the <code><em>prototype_value</em></code> function would return this value instead of a synthesised value.</p>
</div>
</div>
<div class="sect4">
<h5 id="_node_deprecation">Node Deprecation</h5>
<div class="paragraph">
<p>It is possible to mark an instance of any defined node type as deprecated, meaning that by preference it should not be used, and that there is an alternative solution for recording the same information. Rules or recommendations for how deprecation should be handled are outside the scope of the archetype proper, and should be provided by the governance framework under which the archetype is managed.</p>
</div>
</div>
<div class="sect4">
<h5 id="__frozen_nodes">‘Frozen’ Nodes</h5>
<div class="paragraph">
<p>A node may be redefined into multiple child nodes in a specialised archetype. If the children are considered to exhaustively define the value space corresponding to the original node, the latter may be ‘frozen’, meaning no further children can be defined. This also has a runtime implication: a frozen node cannot have any instances, only its children can.</p>
</div>
</div>
<div class="sect4">
<h5 id="_complex_objects_c_complex_object">Complex Objects (C_COMPLEX_OBJECT)</h5>
<div class="paragraph">
<p>Along with <code>C_ATTRIBUTE</code> , <code>C_COMPLEX_OBJECT</code> is the key structuring type of the <code><em>constraint_model</em></code> package, and consists of attributes of type <code>C_ATTRIBUTE</code> , which are constraints on the attributes (i.e. any property, including relationships) of the reference model type. Accordingly, each <code>C_ATTRIBUTE</code> records the name of the constrained attribute (in <code><em>rm_attr_name</em></code>) , the existence and cardinality expressed by the constraint (depending on whether the attribute it constrains is a multiple or single relationship), and the constraint on the object to which this <code>C_ATTRIBUTE</code> refers via its <code><em>children</em></code> attribute (according to its reference model) in the form of further <code>C_OBJECTs</code> .</p>
</div>
</div>
<div class="sect4">
<h5 id="_any_allowed">Any_allowed</h5>
<div class="paragraph">
<p>The any_allowed function on a node indicates that any value permitted by the reference model for the attribute or type in question is allowed by the archetype; its use permits the logical idea of a completely “open” constraint to be simply expressed, avoiding the need for any further substructure.</p>
</div>
</div>
<div class="sect4">
<h5 id="_primitive_types_c_primitive_object_descendants">Primitive Types (C_PRIMITIVE_OBJECT descendants)</h5>
<div class="paragraph">
<p>Constraints on primitive types are defined by the classes inheriting from <code>C_PRIMITIVE_OBJECT</code> , i.e. <code>C_STRING</code> , <code>C_INTEGER</code> and so on. The primitive types are represented in such a way as to accommodate both ‘tuple’ constraints and logically unary constraints, using a tuple array whose members are each a primitive constraint corresponding to each primitive type. Tuple constraints are second order constraints, described below, enable covarying constraints to be stated. In the unary case, the constraint is the first member of a tuple array.</p>
</div>
<div class="paragraph">
<p>The primitive constraint for each primitive type may itself be complex. Its type is given by the type of the constraint accessor in each <code>C_PRIMITIVE_OBJECT</code> descendant and is summarised in the following table.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Primitive type</th>
<th class="tableblock halign-left valign-top">Primitive constrainer type</th>
<th class="tableblock halign-left valign-top">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Boolean&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can represent one or two Boolean values, enabling the logical constraints ‘true’, ‘false’ and ‘true or false’ to be expressed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of possible string values, which may include regular expressions, which are delimited by ‘/’ characters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terminology_code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string containing either a single at-code or a single ac-code. In the latter case, the constraint represents either a locally defined value set or (via binding) an external value set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ordered types</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Interval&lt;T&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can represent a single value (which is a point interval), a list of values (list of point intervals), a list of intervals, which may be mixed proper and point intervals.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>T &#8594; Integer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for Ordered type, with T = <code>Integer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Real</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>T &#8594; Real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for Ordered type, with T = <code>Real</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temporal types</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>List &lt;Interval<br>
 &lt;T&#8594;ISO8601_TYPE&gt;&gt;</code></p>
</div>
<div class="paragraph">
<p>OR</p>
</div>
<div class="paragraph">
<p><code>String (pattern)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for ordered types, with T being an ISO8601-based type, with the addition of a second type constraint - a pattern based on ISO8601 syntax.,</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>T &#8594; ISO8601_DATE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for Temporal types with T = <code>ISO8601_DATE</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>T &#8594; ISO8601_TIME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for Temporal types with T = <code>ISO8601_TIME</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date_time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>T &#8594; ISO8601_DATE_TIME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for Temporal types with T = <code>ISO8601_DATE_TIME</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>T &#8594; ISO8601_DURATION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for Temporal types with T = <code>ISO8601_DURATION</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_terminology_constraints_code_c_terminology_code_code">Terminology Constraints - <code>C_TERMINOLOGY_CODE</code></h5>
<div class="paragraph">
<p>The <code>C_TERMINOLOGY_CODE</code> type entails some complexity and merits further explanation. This is the only constrainer type whose constraint semantics are not self-contained, but located in the archetype terminology and/or in external terminologies.</p>
</div>
<div class="paragraph">
<p>A <code>C_TERMINOLOGY_CODE</code> instance in an archetype is simple: it can only be one of the following constraints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a single ac-code, referring to either a value-set defined in the archetype terminology or bound to an external value set or ref set;</p>
</li>
<li>
<p>in the first case, an additional at-code may be included as an assumed value; the at-code must come from the locally defined value set;</p>
</li>
<li>
<p>a single at-code, repesenting a single possible value. In theory this could be done using an ac-code referring to a value set containing a single value, but there seems little value in this extra verbiage, and little cost in providing the single-member value set short cut.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, a <code>C_TERMINOLOGY_CODE</code> instance can reconstitute the internal value set via access to the archetype terminology (this has to be set up correctly within software). If bindings are evaluated, the external form of a value set can potentially be obtained as well. The utility of this is to be able to evaluate and cache certain external ‘ref sets’ when evaluating the Operational Template.</p>
</div>
</div>
<div class="sect4">
<h5 id="_assumed_value">Assumed_value</h5>
<div class="paragraph">
<p>The ‘assumed_value’ concept is useful for archetypes containing any optional constraint. and provides an ability to define a value that can be assumed for a data item for which no data is found at execution time.</p>
</div>
<div class="paragraph">
<p>For example, an archetype for the concept ‘blood pressure measurement’ might contain an optional protocol section containing a data point for patient position, with choices ‘lying’, ‘sitting’ and ‘standing’. Since the section is optional, data could be created according to the archetype which does not contain the protocol section. However, a blood pressure cannot be taken without the patient in some position, so clearly there is an implied value for patient position. Amongst clinicians, basic assumptions are nearly always made for such things: in general practice, the position could always safely be assumed to be “sitting” if not otherwise stated; in the hospital setting, “lying” would be the normal assumption. The assumed_value feature of archetypes allows such assumptions to be explicitly stated so that all users/systems know what value to assume when optional items are not included in the data.</p>
</div>
<div class="paragraph">
<p>Note that the notion of assumed values is distinct from that of ‘default values’. The latter notion is that of a default ‘pre-filled’ value that is provided (normally in a local context by a template) for a data item that is to be filled in by the user, but which is typically the same in many cases. Default values are thus simply an efficiency mechanism for users. As a result, default values do appear in data, while assumed values don’t.</p>
</div>
</div>
<div class="sect4">
<h5 id="_reference_objects">Reference Objects</h5>
<div class="paragraph">
<p>The types <code>ARCHETYPE_SLOT</code> and <code>C_COMPLEX_OBJECT_PROXY</code> are used to express, respectively, a ‘slot’ where further archetypes can be used to continue describing constraints; a reference to a part of the current archetype that expresses exactly the same constraints needed at another point.</p>
</div>
</div>
<div class="sect4">
<h5 id="_constraints_on_enumeration_types">Constraints on Enumeration Types</h5>
<div class="paragraph">
<p>Enumeration types in the reference model are assumed to have semantics expected in UML, and mainstream programming languages, i.e. to be a distinct type based on a primitive type, normally Integer or String. Each such type consists of a set of values from the domain of its underlying type, thus, a set of Integer, String or other primitive values. Each of these values is assumed to be named in the manner of a symbolic constant. Although stricly speaking UML doesn’t require an enumerated type to be based on an underlying primitive type, programming languages do, hence the assumption here that values from the domain of such a type are involved.</p>
</div>
<div class="paragraph">
<p>A constraint on an enumerated type therefore consists of an AOM instance of a <code>C_PRIMITIVE</code> descendant, almost always <code>C_INTEGER</code> or <code>C_STRING</code> . The flag <code><em>is_enumerated_type_constraint</em></code> defined on <code>C_PRIMITIVE</code> indicates that a given <code>C_PRIMITIVE</code> is a constrainer for an enumerated type.</p>
</div>
<div class="paragraph">
<p>Since <code>C_PRIMITIVEs</code> don’t have type names in ADL, the type name is inferred by any parser or compiler tool that deserialises an archetype from ADL, and stored in the <code><em>rm_type</em></code> attribute inherited from <code>C_OBJECT</code> . An example is shown below of a type enumeration.</p>
</div>
<div id="enumerated_constraint" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/enumerated_type_constraint.svg" alt="enumerated type constraint">
</div>
<div class="title">Figure 14. Enumerated Constraint</div>
</div>
<div class="paragraph">
<p>A parser that deserialises from an object dump format such as ODIN, JSON or XML will not need to do this.</p>
</div>
<div class="paragraph">
<p>The form of the constraint itself is simply a series of Integer, String or other primitive values, or an equivalent range or ranges. In the above example, the ADL equivalent of the pk_percent, pk_fraction constraint on a field of type <code>PROPORTION_KIND</code> is in fact just <em>\{2, 3}</em>, and it is visualised by lookup to show the relevant symbolic names.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_second_order_constraints">5.5. Second Order Constraints</h3>
<div class="paragraph">
<p>All of the constraint semantics described above can be considered ‘first order’ in the sense that they define how specific object/attribute/object hierarchies are defined in the instance possibility space of some part of a reference model.</p>
</div>
<div class="paragraph">
<p>Some constraints however do not fit directly within the object/attribute/object hierarchy scheme, and are considered ‘second order constraints’ in the archetype formalism. The ‘rule’ constraints (‘invariants’ in ADL/AOM 1.4) constitute one such group. These constraints are defined in terms of first order predicate logic statements that can refer to any number of constraint nodes within the main hierarchy. These are described in Figure <a href="#rules_package">Rules Package</a>.</p>
</div>
<div class="paragraph">
<p>Another type of second order constraint can be ‘attached’ to the object/attribute/object hierarchy in order to further limit structural possibilities. Although these constraints could also theoretically be expressed as rules, they are supported by direct additions to the main constraint model since they can be easily and intuitively represented ‘inline’ in ADL and corresponding AOM structures.</p>
</div>
<div class="sect3">
<h4 id="_tuple_constraints">5.5.1. Tuple Constraints</h4>
<div class="paragraph">
<p>Tuple constraints are designed to account for the very common need to constrain the values of more than one RM class attribute together. This effectively treats the attributes in question as a tuple, and the corresponding object constraints are accordingly modelled as tuples. Additions to the main constraint model to support tuples are shown below.</p>
</div>
<div id="tuple_constraint_model" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="uml_diagrams/AOM-constraint_model-tuple.svg" alt="AOM constraint model tuple">
</div>
<div class="title">Figure 15. Tuple Constraint Model</div>
</div>
<div class="paragraph">
<p>In this model, the type <code>C_ATTRIBUTE_TUPLE</code> groups the co-constrained <code>C_ATTRIBUTE`s under a `C_COMPLEX_OBJECT</code>. Currently the concrete type is limited to being <code>C_PRIMITIVE_OBJECT</code>, to reduce complexity, and since this caters for the known examples of tuple constraints. In principle, any <code>C_DEFINED_OBJECT</code> would be allowed, and this may change in the future.</p>
</div>
<div class="paragraph">
<p>The tuple constraint type replaces all domain-specific constraint types defined in ADL/AOM 1.4, including <code>C_DV_QUANTITY</code> and <code>C_DV_ORDINAL</code>.</p>
</div>
<div class="paragraph">
<p>These additions allow standard constraint structures (i.e. <code>C_ATTRIBUTE</code> / <code>C_COMPLEX_OBJECT</code> / <code>C_PRIMITIVE_OBJECT</code> hierarchies) to be ‘annotated’, while leaving the first order structure intact. The following example shows an archetype instance structure in which a notional <code>ORDINAL</code> type is constrained. The logical requirement is to constrain a <code>ORDINAL</code> to one of three instance possibilities, each of which consists of a pair of values for the attributes value and symbol, of type Integer and <code>TERMINOLOGY_CODE</code> respectively. Each of these three instance constraints should be understood as an alternative for the single valued owning attribute, <code>ELEMENT</code> .value. Tuple constraints achieve the requirement to express the constraints as pairs not just as allowable alternatives at the final leaf level, which would incorrectly allowing any mixing of the Integer and code values.</p>
</div>
<div id="ordinal_tuple_example" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="uml_diagrams/AOM-ordinal_tuple_example.svg" alt="AOM ordinal tuple example">
</div>
<div class="title">Figure 16. Tuple Constraint Example AOM Instances</div>
</div>
<div id="tuple_constraint_example_data" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/tuple_example_data.png" alt="tuple example data">
</div>
<div class="title">Figure 17. Tuple Constraint Example Data</div>
</div>
</div>
<div class="sect3">
<h4 id="_assertions">5.5.2. Assertions</h4>
<div class="paragraph">
<p>Assertions are also used in <code>ARCHETYPE_SLOTs</code> , in order to express the ‘included’ and ‘excluded’ archetypes for the slot. In this case, each assertion is an expression that refers to parts of other archetypes, such as its identifier (e.g. ‘include archetypes with short_concept_name matching xxxx’). Assertions are modelled here as a generic expression tree of unary prefix and binary infix operators. Examples of archetype slots in ADL syntax are given in the openEHR ADL document.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_aom_type_substitutions">5.6. AOM Type Substitutions</h3>
<div class="paragraph">
<p>The <code>C_OBJECT</code> types defined in Figure <a href="#constraint_model_top">constraint_model Package</a> are reproduced below, with concrete types that may actually occur in archetypes shown in dark yellow / non-italic.</p>
</div>
<div id="c_object_substitutions" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/c_object_substitutions.png" alt="c object substitutions">
</div>
<div class="title">Figure 18. C_Object Substitutions</div>
</div>
<div class="paragraph">
<p>Within a specialised archetype, nodes that redefine corresponding nodes in the parent are normally of the same <code>C_OBJECT</code> type (we can think of this as a ‘meta-type’, since the RM type is the ‘type’ in the information model sense), but in some cases may also be of different <code>C_OBJECT</code> types.</p>
</div>
<div class="paragraph">
<p>The rules for meta-type redefinition are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A node of each meta-type can be redefined by a node of the same meta-type, with narrowed / added constraints;</p>
</li>
<li>
<p><code>ARCHETYPE_SLOT</code> can be redefined by:</p>
<div class="ulist">
<ul>
<li>
<p>one or more <code>C_ARCHETYPE_ROOT</code> nodes taken together, considered to define a ‘filled’ version of the slot;</p>
</li>
<li>
<p>an <code>ARCHETYPE_SLOT</code> , in order to close the slot.</p>
</li>
</ul>
</div>
</li>
<li>
<p>A <code>C_ARCHETYPE_ROOT</code> node can be redefined by:</p>
<div class="ulist">
<ul>
<li>
<p>A <code>C_ARCHETYPE_ROOT</code> , where the archetype_ref of the redefining node is a specialisation of that mentioned in the parent node.</p>
</li>
</ul>
</div>
</li>
<li>
<p>A terminal <code>C_COMPLEX_OBJECT</code> node containing no constraint other than RM type, <code><em>node_id</em></code> and possibly occurrences (i.e. having no substructure), can be redefined by a constraint of any other AOM type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The ‘terminal <code>C_COMPLEX_OBJECT</code> ’ can be understood as a placeholder node primarily defined for the purpose of stating meaning.</p>
</div>
</div>
<div class="sect2">
<h3 id="_class_definitions_2">5.7. Class Definitions</h3>
<div class="sect3">
<h4 id="_archetype_constraint_class">5.7.1. ARCHETYPE_CONSTRAINT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong><em>ARCHETYPE_CONSTRAINT (abstract)</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Archetype equivalent to LOCATABLE class in openEHR Common reference model. Defines common constraints for any inheritor of LOCATABLE in any reference model.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>parent</strong>:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>soc_parent</strong>: <code>C_SECOND_ORDER</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_prohibited</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if this node (and all its sub-nodes) is a valid archetype node for its type. This function should be implemented by each subtype to perform semantic validation of itself, and then call the is_valid function in any subparts, and generate the result appropriately.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_path</strong> (a_path: <code>String</code>): <code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the relative path a_path exists at this node.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>path</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path of this node relative to root of archetype.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_conforms_to</strong> (other: <code>ARCHETYPE_CONSTRAINT</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if constraints represented by this node, ignoring any sub-parts, are narrower or the same as other. <br>
Typically used during validation of special-ised archetype nodes.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_congruent_to</strong> (other: <code>ARCHETYPE_CONSTRAINT</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if constraints represented by this node contain no further redefinitions with respect to the node other, with the exception of node_id redefnition in C_OBJECT nodes. <br>
Typically used to test if an inherited node locally contains any constraints.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_second_order_constrained</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_root</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_leaf</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_attribute_class">5.7.2. C_ATTRIBUTE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>C_ATTRIBUTE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Abstract model of constraint on any kind of attribute in a class model.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">ARCHETYPE_CONSTRAINT</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rm_attribute_name</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reference model attribute within the enclosing type represented by a C_OBJECT.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>existence</strong>: <code>MULTIPLICITY_INTERVAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Constraint settable on every attribute, regardless of whether it is singular or of a container type, which indicates whether its target object exists or not (i.e. is mandatory or not). Only set if it overrides the underlying reference model or parent archetype in the case of specialised archetypes.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>children</strong>: <code>List&lt;C_OBJECT&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Child C_OBJECT nodes. Each such node represents a constraint on the type of this attribute in its reference model. Multiples occur both for multiple items in the case of container attributes, and alternatives in the case of singular attributes.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>differential_path</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the parent object of this attribute (i.e. doesn’t include the name of this attribute). Used only for attributes in differential form, specialised archetypes. Enables only the re-defined parts of a specialised archetype to be expressed, at the path where they occur.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>cardinality</strong>: <code>CARDINALITY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cardinality constraint of attribute, if a container attribute.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_multiple</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag indicating whether this attribute constraint is on a container (i.e. multiply-valued) attribute.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>any_allowed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_mandatory</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rm_attribute_path</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path of this attribute with respect to owning C_OBJECT, including differential path where applicable.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_single</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if this node logically represents a single-valued attribute. Evaluated as not is_multiple.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock">(effected)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_congruent_to</strong> (other: <code>ARCHETYPE_CONSTRAINT</code>): <code>Boolean</code><br>
<strong><em>Post</em></strong>: Result = existence = Void and is_single and other.is_single) or (is_multiple and other.is_multiple and cardinality = Void</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if constraints represented by this node contain no further redefinitions with respect to the node other, with the exception of node_id redefnition in C_OBJECT nodes. <br>
Typically used to test if an inherited node locally contains any constraints.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock">(effected)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_conforms_to</strong> (other: <code>ARCHETYPE_CONSTRAINT</code>): <code>Boolean</code><br>
<strong><em>Post</em></strong>: Result = existence_conforms_to (other) and is_single and other.is_single) or else (is_multiple and cardinality_conforms_to (other)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if constraints represented by this node, ignoring any sub-parts, are narrower or the same as other. <br>
Typically used during validation of special-ised archetype nodes.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_conformance_semantics">5.7.3. Conformance Semantics</h4>
<div class="paragraph">
<p>The following functions formally define the conformance of an attribute node in a specialised archetype to the corresponding node in a parent archetype, where ‘corresponding’ means a node found at the same or a congruent path.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="eiffel"><span class="tok-n">c_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
	<span class="tok-kr">require</span>
		<span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
	<span class="tok-kr">do</span>
		<span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">existence_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">)</span> <span class="tok-ow">and</span>
			<span class="tok-p">((</span><span class="tok-n">is_single</span> <span class="tok-ow">and</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">is_single</span><span class="tok-p">)</span> <span class="tok-ow">or else</span>
			<span class="tok-p">(</span><span class="tok-n">is_multiple</span> <span class="tok-ow">and</span> <span class="tok-n">cardinality_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">)))</span>
	<span class="tok-kr">end</span>

<span class="tok-n">c_congruent_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
	<span class="tok-kr">require</span>
		<span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
	<span class="tok-kr">do</span>
		<span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">existence</span> <span class="tok-o">=</span> <span class="tok-kc">Void</span> <span class="tok-ow">and</span> <span class="tok-p">((</span><span class="tok-n">is_single</span> <span class="tok-ow">and</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">is_single</span><span class="tok-p">)</span> <span class="tok-ow">or</span>
				<span class="tok-p">(</span><span class="tok-n">is_multiple</span> <span class="tok-ow">and</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">is_multiple</span> <span class="tok-ow">and</span> <span class="tok-n">cardinality</span> <span class="tok-o">=</span> <span class="tok-kc">Void</span><span class="tok-p">))</span>
	<span class="tok-kr">end</span>

<span class="tok-n">existence_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
	<span class="tok-kr">require</span>
		<span class="tok-n">other_exists</span><span class="tok-p">:</span> <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
	<span class="tok-kr">do</span>
		<span class="tok-kr">if</span> <span class="tok-n">existence</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-ow">and</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">existence</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-kr">then</span>
			<span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">existence</span><span class="tok-p">.</span><span class="tok-n">contains</span> <span class="tok-p">(</span><span class="tok-n">existence</span><span class="tok-p">)</span>
		<span class="tok-kr">else</span>
			<span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-kc">True</span>
		<span class="tok-kr">end</span>
	<span class="tok-kr">end</span>

<span class="tok-n">cardinality_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
	<span class="tok-kr">require</span>
		<span class="tok-n">other_exists</span><span class="tok-p">:</span> <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
	<span class="tok-kr">do</span>
		<span class="tok-kr">if</span> <span class="tok-n">cardinality</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-ow">and</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">cardinality</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-kr">then</span>
			<span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">cardinality</span><span class="tok-p">.</span><span class="tok-n">contains</span> <span class="tok-p">(</span><span class="tok-n">cardinality</span><span class="tok-p">)</span>
		<span class="tok-kr">else</span>
			<span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-kc">True</span>
		<span class="tok-kr">end</span>
	<span class="tok-kr">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_validity_rules_2">5.8. Validity Rules</h3>
<div class="paragraph">
<p>The validity rules are as follows:</p>
</div>
<div class="paragraph rule">
<p><strong>VCARM</strong>: attribute name reference model validity: an attribute name introducing an attribute constraint block must be defined in the underlying information model as an attribute (stored or computed) of the type which introduces the enclosing object block.</p>
</div>
<div class="paragraph rule">
<p><strong>VCAEX</strong>: archetype attribute reference model existence conformance: the existence of an attribute, if set, must conform, i.e. be the same or narrower, to the existence of the corresponding attribute in the underlying information model.</p>
</div>
<div class="paragraph rule">
<p><strong>VCAM</strong>: archetype attribute reference model multiplicity conformance: the multiplicity, i.e. whether an attribute is multiply- or single-valued, of an attribute must conform to that of the corresponding attribute in the underlying information model.</p>
</div>
<div class="paragraph rule">
<p><strong>VDIFV</strong>: archetype attribute differential path validity: an archetype may only have a differential path if it is specialised..</p>
</div>
<div class="paragraph">
<p>The following validity rule applies to redefinition in a specialised archetype:</p>
</div>
<div class="paragraph rule">
<p><strong>VDIFP</strong>: specialised archetype attribute differential path validity: if an attribute constraint has a differential path, the path must exist in the flat parent, and also be valid with respect to the reference model, i.e. in the sense that it corresponds to a legal potential construction of objects.</p>
</div>
<div class="paragraph rule">
<p><strong>VSANCE</strong>: specialised archetype attribute node existence conformance: the existence of a redefined attribute node in a specialised archetype, if stated, must conform to the existence of the corresponding node in the flat parent archetype, by having an identical range, or a range wholly contained by the latter.</p>
</div>
<div class="paragraph rule">
<p><strong>VSAM</strong>: specialised archetype attribute multiplicity conformance: the multiplicity, i.e. whether an attribute is multiply- or single-valued, of a redefined attribute must conform to that of the corresponding attribute in the parent archetype.</p>
</div>
<div class="paragraph">
<p>The following validity rules apply to single-valued attributes, i.e when <code>C_ATTRIBUTE</code>.<code><em>is_multiple</em></code> is False:</p>
</div>
<div class="paragraph rule">
<p><strong>VACSO</strong>: single-valued attribute child object occurrences validity: the occurrences of a child object of a single-valued attribute cannot have an upper limit greater than 1.</p>
</div>
<div class="paragraph">
<p>The following validity rules apply to container attributes, i.e when <code>C_ATTRIBUTE</code>.<code><em>is_multiple</em></code> is True:</p>
</div>
<div class="paragraph rule">
<p><strong>VACMCU</strong>: cardinality/occurrences upper bound validity: where a cardinality with a finite upper bound is stated on an attribute, for all immediate child objects for which an occurrences constraint is stated, the occurrences must either have an open upper bound (i.e. n..*) which is interpreted as the maximum value allowed within the cardinality, or else a finite upper bound which is &#8656; the cardinality upper bound.</p>
</div>
<div class="paragraph rule">
<p><strong>VACMCO</strong>: cardinality/occurrences orphans: it must be possible for at least one instance of one optional child object (i.e. an object for which the occurrences lower bound is 0) and one instance of every mandatory child object (i.e. object constraints for which the occurrences lower bound is &gt;= 1) to be included within the cardinality range.</p>
</div>
<div class="paragraph rule">
<p><strong>VCACA</strong>: archetype attribute reference model cardinality conformance: the cardinality of an attribute must conform, i.e. be the same or narrower, to the cardinality of the corresponding attribute in the underlying information model.</p>
</div>
<div class="paragraph">
<p>The following validity warnings apply to container attributes, i.e when <code>C_ATTRIBUTE</code>.<code><em>is_multiple</em></code> is True:</p>
</div>
<div class="paragraph rule">
<p><strong>WACMCL</strong>: cardinality/occurrences lower bound validity: where a cardinality with a finite upper bound is stated on an attribute, for all immediate child objects for which an occurrences constraint is stated, the sum of occurrences lower bounds should be lower than the cardinality upper limit.</p>
</div>
<div class="paragraph">
<p>The following validity rule applies to cardinality redefinition in a specialised archetype:</p>
</div>
<div class="paragraph rule">
<p><strong>VSANCC</strong>: specialised archetype attribute node cardinality conformance: the cardinality of a redefined (multiply-valued) attribute node in a specialised archetype, if stated, must conform to the cardinality of the corresponding node in the flat parent archetype by either being identical, or being wholly contained by the latter.</p>
</div>
<div class="sect3">
<h4 id="_cardinality_class">5.8.1. CARDINALITY Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>CARDINALITY</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Express constraints on the cardinality of container objects which are the values of multiply-valued attributes, including uniqueness and ordering, providing the means to state that a container acts like a logical list, set or bag. The cardinality cannot contradict the cardinality of the corresponding attribute within the relevant reference model.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>interval</strong>: <code>MULTIPLICITY_INTERVAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The interval of this cardinality.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_ordered</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the members of the container attribute to which this cardinality refers are ordered.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_unique</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the members of the container attribute to which this cardinality refers are unique.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_bag</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the semantics of this cardinality represent a bag, i.e. unordered, non-unique membership.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_list</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the semantics of this cardinality represent a list, i.e. ordered, non-unique membership.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_set</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the semantics of this cardinality represent a bag, i.e. unordered, non-unique membership.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_object_class">5.8.2. C_OBJECT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong><em>C_OBJECT (abstract)</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Abstract model of constraint on any kind of object node.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">ARCHETYPE_CONSTRAINT</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rm_type_name</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reference model type that this node corresponds to.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>occurrences</strong>: <code>MULTIPLICITY_INTERVAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Occurrences of this object node in the data, under the owning attribute. Upper limit can only be greater than 1 if owning attribute has a cardinality of more than 1.<br>
Only set if it overrides the parent archetype in the case of specialised archetypes, or else the occurrences inferred from the underlying reference model existence and/or cardinality of the containing attribute.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>node_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Semantic identifier of this node, used to dis-tinguish sibling nodes. All nodes must have a node_id; for nodes under a container C_ATTRIBUTE, the id must be an id-code must be defined in the archetype terminolo-gy. For valid structures, all node ids are id-codes.<br>
For C_PRIMITIVE_OBJECTs, it will have the special value Primitive_node_id.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_deprecated</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if this node and by implication all sub-nodes are deprecated for use.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sibling_order</strong>: <code>SIBLING_ORDER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional indicator of order of this node with respect to another sibling. Only meaningful in a specialised archetype for a C_OBJECT within a C_ATTRIBUTE with is_multiple = True.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>specialisation_depth</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Level of specialisation of this archetype node, based on its node_id. The value 0 corresponds to non-specialised, 1 to first-level specialisation and so on. The level is the same as the number of ‘.’ characters in the node_id code. If node_id is not set, the return value is -1, signifying that the specialisation level should be determined from the nearest parent C_OBJECT node having a node_id.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_occurrences_inferencing_rules">5.9. Occurrences inferencing rules</h3>
<div class="paragraph">
<p>The notion of ‘occurrences’ does not exist in an object model that might be used as the reference model on which archteypes are based, because it is a class model. However, archetypes make statements about how many objects conforming to a specific object constraint node might exist, within a container attribute. In an operational template, an occurrences constraint is required on all children of container attributes. Most such constraints come from the source template(s) and archetypes, but in some cases, there will be nodes with no occurrences. In these cases, the occurrences constraint is inferred from the reference model according to the following algorithm, where <code>c_object</code> represents any object node in an archetype.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="eiffel"><span class="tok-kr">if</span> <span class="tok-ow">not</span> <span class="tok-n">c_object</span><span class="tok-p">.</span><span class="tok-n">is_root</span> <span class="tok-ow">and</span> <span class="tok-n">c_object</span><span class="tok-p">.</span><span class="tok-n">occurrences</span> <span class="tok-o">=</span> <span class="tok-kc">Void</span> <span class="tok-kr">then</span>
	<span class="tok-kr">if</span> <span class="tok-n">is_container_attribute_in_rm</span> <span class="tok-p">(</span><span class="tok-n">c_object</span><span class="tok-p">.</span><span class="tok-n">parent</span><span class="tok-p">)</span> <span class="tok-kr">then</span>
		<span class="tok-kr">if</span> <span class="tok-n">rm_parent_attr</span><span class="tok-p">.</span><span class="tok-n">cardinality</span><span class="tok-p">.</span><span class="tok-n">upper_unbounded</span> <span class="tok-kr">then</span>
			<span class="tok-n">c_object</span><span class="tok-p">.</span><span class="tok-n">set_occurrences</span> <span class="tok-p">(</span><span class="tok-o">|</span><span class="tok-mf">0.</span><span class="tok-p">.</span><span class="tok-o">*|</span><span class="tok-p">)</span>
		<span class="tok-kr">else</span>
			<span class="tok-n">c_object</span><span class="tok-p">.</span><span class="tok-n">set_occurrences</span> <span class="tok-p">(</span><span class="tok-o">|</span><span class="tok-mf">0.</span><span class="tok-p">.</span><span class="tok-n">rm_parent_attr</span><span class="tok-p">.</span><span class="tok-n">cardinality</span><span class="tok-p">.</span><span class="tok-n">upper</span><span class="tok-o">|</span><span class="tok-p">)</span>
		<span class="tok-kr">end</span>
	<span class="tok-kr">else</span>
		<span class="tok-n">c_object</span><span class="tok-p">.</span><span class="tok-n">set_occurrences</span> <span class="tok-p">(</span><span class="tok-n">rm_parent_attr</span><span class="tok-p">.</span><span class="tok-n">existence</span><span class="tok-p">)</span>
	<span class="tok-kr">end</span>
<span class="tok-kr">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Occurrences is not really required on children of single-valued attributes, because the notional occurrences is always the same as the existence constraint of the owning attribute in the flat parent structure, or else the reference model.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conformance_semantics_2">5.10. Conformance semantics</h3>
<div class="paragraph">
<p>The following functions formally define the conformance of an object node in a specialised archetype to the corresponding node in a parent archetype, where ‘corresponding’ means a node found at the same or a congruent path.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="eiffel"><span class="tok-n">c_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
	<span class="tok-kr">require</span>
		<span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
	<span class="tok-kr">do</span>
		<span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">node_id_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">)</span> <span class="tok-ow">and</span>
			<span class="tok-n">occurrences_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">)</span> <span class="tok-ow">and</span>
			<span class="tok-p">(</span><span class="tok-n">rm_type_name</span><span class="tok-p">.</span><span class="tok-n">is_equal</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">rm_type_name</span><span class="tok-p">)</span> <span class="tok-ow">or else</span>
			<span class="tok-n">rm_types_conformant</span><span class="tok-p">(</span><span class="tok-n">rm_type_name</span><span class="tok-p">,</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">rm_type_name</span><span class="tok-p">))</span>
	<span class="tok-kr">end</span>

<span class="tok-n">c_congruent_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
		<span class="tok-c1">-- True if this node makes no changes to ‘other’ (from a</span>
		<span class="tok-c1">-- specialisation parent archetype) apart from possible</span>
		<span class="tok-c1">-- change of node-id</span>
	<span class="tok-kr">require</span>
		<span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
	<span class="tok-kr">do</span>
		<span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">rm_type_name</span><span class="tok-p">.</span><span class="tok-n">is_case_insensitive_equal</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">rm_type_name</span><span class="tok-p">)</span> <span class="tok-ow">and</span>
			<span class="tok-p">(</span><span class="tok-n">occurrences</span> <span class="tok-o">=</span> <span class="tok-kc">Void</span> <span class="tok-ow">or else</span> <span class="tok-n">occurrences</span> <span class="tok-o">~</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">occurrences</span><span class="tok-p">)</span> <span class="tok-ow">and</span>
			<span class="tok-p">(</span><span class="tok-n">sibling_order</span> <span class="tok-o">=</span> <span class="tok-kc">Void</span> <span class="tok-ow">or else</span> <span class="tok-n">sibling_order</span> <span class="tok-o">~</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">sibling_order</span><span class="tok-p">)</span> <span class="tok-ow">and</span>
			<span class="tok-n">node_reuse_congruent</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">)</span>
	<span class="tok-kr">end</span>

<span class="tok-n">rm_type_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
	<span class="tok-kr">require</span>
		<span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
	<span class="tok-kr">do</span>
		<span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">rm_type_name</span><span class="tok-p">.</span><span class="tok-n">is_equal</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">rm_type_name</span><span class="tok-p">)</span> <span class="tok-ow">or</span>
		<span class="tok-n">rm_checker</span><span class="tok-p">.</span><span class="tok-n">is_sub_type_of</span> <span class="tok-p">(</span><span class="tok-n">rm_type_name</span><span class="tok-p">,</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">rm_type_name</span><span class="tok-p">)</span>
	<span class="tok-kr">end</span>

<span class="tok-n">occurrences_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
	<span class="tok-kr">require</span>
		<span class="tok-n">other_exists</span><span class="tok-p">:</span> <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
		<span class="tok-n">other_is_flat</span><span class="tok-p">:</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">occurrences</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
	<span class="tok-kr">do</span>
		<span class="tok-kr">if</span> <span class="tok-n">occurrences</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-ow">and</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">occurrences</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span> <span class="tok-kr">then</span>
			<span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">occurrences</span><span class="tok-p">.</span><span class="tok-n">contains</span> <span class="tok-p">(</span><span class="tok-n">occurrences</span><span class="tok-p">)</span>
		<span class="tok-kr">else</span>
			<span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-kc">True</span>
		<span class="tok-kr">end</span>
	<span class="tok-kr">end</span>

<span class="tok-n">node_id_conforms_to</span> <span class="tok-p">(</span><span class="tok-n">other</span><span class="tok-p">:</span> <span class="tok-kr">like</span> <span class="tok-kc">Current</span><span class="tok-p">):</span> <span class="tok-n">Boolean</span>
	<span class="tok-kr">require</span>
		<span class="tok-n">other_exists</span><span class="tok-p">:</span> <span class="tok-n">other</span> <span class="tok-o">/=</span> <span class="tok-kc">Void</span>
	<span class="tok-kr">do</span>
		<span class="tok-kc">Result</span> <span class="tok-o">:=</span> <span class="tok-n">codes_conformant</span> <span class="tok-p">(</span><span class="tok-n">node_id</span><span class="tok-p">,</span> <span class="tok-n">other</span><span class="tok-p">.</span><span class="tok-n">node_id</span><span class="tok-p">)</span>
	<span class="tok-kr">end</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_validity_rules_3">5.11. Validity Rules</h3>
<div class="paragraph">
<p>The validity rules for all <code>C_OBJECTs</code> are as follows:</p>
</div>
<div class="paragraph rule">
<p><strong>VCORM</strong> object constraint type name existence: a type name introducing an object constraint block must be defined in the underlying information model.</p>
</div>
<div class="paragraph rule">
<p><strong>VCORMT</strong> object constraint type validity: a type name introducing an object constraint block must be the same as or conform to the type stated in the underlying information model of its owning attribute.</p>
</div>
<div class="paragraph rule">
<p><strong>VCOCD</strong> object constraint definition validity: an object constraint block consists of one of the following (depending on subtype): an ‘any’ constraint; a reference; an inline definition of sub-constraints, or nothing, in the case where occurrences is set to {0}.</p>
</div>
<div class="paragraph rule">
<p><strong>VCOID</strong> object node identifier validity: every object node must have a node identifier.</p>
</div>
<div class="paragraph rule">
<p><strong>VCOSU</strong> object node identifier validity: every object node must be unique within the archetype.</p>
</div>
<div class="paragraph">
<p>The following validity rules govern <code>C_OBJECTs</code> in specialised archetypes.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONT</strong> specialised archetype object node meta-type conformance: the meta-type of a redefined object node (i.e. the AOM node type such as <code>C_COMPLEX_OBJECT</code> etc) in a specialised archetype must be the same as that of the corresponding node in the flat parent, with the following exceptions: a <code>C_COMPLEX_OBJECT</code> with no child attributes may be redefined by a node of any AOM type; a <code>C_COMPLEX_OBJECT_PROXY</code>, may be redefined by a <code>C_COMPLEX_OBJECT</code>; a <code>ARCHTEYPE_SLOT</code> may be redefined by <code>C_ARCHETYPE_ROOT</code> (i.e. ‘slot-filling’). See also validity rules VDSSID and VARXID.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONCT</strong> specialised archetype object node reference type conformance: the reference model type of a redefined object node in a specialised archetype must conform to the reference model type in the corresponding node in the flat parent archetype by either being identical, or conforming via an inheritance relationship in the relevant reference model.</p>
</div>
<div class="paragraph deprecated">
<p><em>Deprecated</em>: <strong>VSONIR</strong> specialised archetype redefined object node identifier condition: the node identifier of an object node in a specialised archetype that is a redefinition of a node in the flat parent must be redefined if any of reference model type, node identifier definition in the terminology, or occurrences of the immediate object constraint is redefined, with the exception of occurrences being redefined to {0}, i.e. exclusion.</p>
</div>
<div class="paragraph deprecated">
<p><em>Deprecated</em>: <strong>VSONI</strong> specialised archetype redefined object node identifier validity: if an object node in a specialised archetype is a redefinition of a node in the flat parent according to VSONIR, and the parent node carries a node identifier, it must carry a node identifier specalised at the level of the child archetype. Otherwise it must carry the same node identifier (or none) as the corresponding parent node.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONIN</strong> specialised archetype new object node identifier validity: if an object node in a specialised archetype is a new node with respect to the flat parent, and it carries a node identifier, the identifier must be a ‘new’ node identifier, specalised at the level of the child archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONIF</strong> specialised archetype object node identifier validity in flat siblings: the identification (or not) of an object node in a specialised archetype must be valid with respect to any sibling object nodes in the flattened parent (see VACMI).</p>
</div>
<div class="paragraph rule">
<p><strong>VSONCO</strong> specialised archetype redefine object node occurrences validity: the occurrences of a redefined object node in a specialised archetype, if stated, must conform to the occurrences in the corresponding node in the flat parent archetype by either being identical, or being wholly contained by the latter.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONPT</strong> specialised archetype prohibited object node AOM type validity: the occurrences of a redefined object node in a specialised archetype, may only be prohibited (i.e. {0}) if the matching node in the parent is of the same AOM type.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONPI</strong> specialised archetype prohibited object node AOM node id validity: a redefined object node in a specialised archetype with occurrences matching {0} must have exactly the same node id as the node in the flat parent being redefined.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONPO</strong> specialised archetype object node prohibited occurrences validity: the occurrences of a new (i.e. having no corresponding node in the parent flat) object node in a specialised archetype, if stated, may not be ‘prohibited’, i.e. {0}, since prohibition only makes sense for an existing node.</p>
</div>
<div class="paragraph rule">
<p><strong>VSSM</strong> specialised archetype sibling order validity: the sibling order node id code used in a sibling marker in a specialised archetype must refer to a node found within the same container in the flat parent archetype.</p>
</div>
<div class="sect3">
<h4 id="_sibling_order_class">5.11.1. SIBLING_ORDER Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>SIBLING_ORDER</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Defines the order indicator that can be used on a C_OBJECT within a container attribute in a specialised archetype to indicate its order with respect to a sibling defined in a higher specialisation level.<br>
Misuse: This type cannot be used on a C_OBJECT other than one within a container attribute in a specialised archetype.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_before</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the order relationship is ‘before’, if False, it is ‘after’.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sibling_node_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node identifier of sibling before or after which this node should come.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_after</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the order relationship is ‘after’, computed as the negation of is_before.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_defined_object_class">5.11.2. C_DEFINED_OBJECT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong><em>C_DEFINED_OBJECT (abstract)</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Abstract parent type of C_OBJECT subtypes that are defined by value, i.e. whose definitions are actually in the archetype rather than being by reference.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_OBJECT</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_frozen</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if this node is closed for further re-definition. Any child nodes defined as sib-lings are considered to exhaustively represent the possible value space of this original parent node.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>default_value</strong>: <code>Any</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default value set in a template, and present in an operational template. Generally limited to leaf and near-leaf nodes.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_value</strong> (a_value: <code>Any</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if a_value is valid with respect to constraint expressed in concrete instance of this type.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>prototype_value</strong>: <code>Any</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generate a prototype value from this constraint object.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_default_value</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if there is an assumed value.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_complex_object_class">5.11.3. C_COMPLEX_OBJECT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>C_COMPLEX_OBJECT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Constraint on complex objects, i.e. any object that consists of other object constraints.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_DEFINED_OBJECT</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>attributes</strong>: <code>List&lt;C_ATTRIBUTE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of constraints on attributes of the reference model type represented by this object.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>attribute_tuples</strong>: <code>List&lt;C_ATTRIBUTE_TUPLE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of attribute tuple constraints under this object constraint, if any.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>any_allowed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if any value (i.e. instance) of the reference model type would be allowed. Redefined in descendants.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_validity_rules_4">5.12. Validity Rules</h3>
<div class="paragraph">
<p>The validity rules for <code>C_COMPLEX_OBJECTs</code> are as follows:</p>
</div>
<div class="paragraph rule">
<p><strong>VCATU</strong> attribute uniqueness: sibling attributes occurring within an object node must be uniquely named with respect to each other, in the same way as for class definitions in an object reference model.</p>
</div>
<div class="sect3">
<h4 id="_c_archetype_root_class">5.12.1. C_ARCHETYPE_ROOT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>C_ARCHETYPE_ROOT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">A specialisation of C_COMPLEX_OBJECT whose node_id attribute is an archetype identifier rather than the normal internal node code (i.e. id-code).<br>
Used in two situations. The first is to represent an ‘external reference’ to an archetype from within another archetype or template. This supports re-use. The second use is within a template, where it is used as a slot-filler. <br>
For a new external reference, the node_id is set in the normal way, i.e. with a new code at the specialisation level of the archetype. <br>
For a slot-filler or a redefined external reference, the node_id is set to a specialised version of the node_id of the node being specialised, allowing matching to occur during flattening.<br>
In all uses within source archetypes and templates, the children attribute is Void.<br>
In an operational template, the node_id is converted to the archetype_ref, and the structure contains the result of flattening any template overlay structure and the underlying flat archetype.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_COMPLEX_OBJECT</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>archetype_ref</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reference to archetype is being used to fill a slot or redefine an external reference. Typi-cally an ‘interface’ archetype id, i.e. identifi-er with partial version information.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_validity_rules_5">Validity Rules</h5>
<div class="paragraph">
<p>The following validity rules apply to <code>C_ARCHETYPE_ROOT</code> objects:</p>
</div>
<div class="paragraph rule">
<p><strong>VARXS</strong> external reference conforms to slot: the archetype reference must conform to the archetype slot constraint of the flat parent and be of a reference model type from the same reference model as the current archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VARXNC</strong> external reference node identifier validity: if the reference object is a redefinition of either a slot node, or another external reference node, the node_id of the object must conform to (i.e. be the same or a child of) the node_id of the corresponding parent node.</p>
</div>
<div class="paragraph rule">
<p><strong>VARXAV</strong> external reference node archetype reference validity: if the reference object is a redefinition of another external reference node, the archetype_ref of the object must match a real archetype that has as an ancestor the archetype matched by the archetype reference mentioned in the corresponding parent node.</p>
</div>
<div class="paragraph rule">
<p><strong>VARXTV</strong> external reference type validity: the reference model type of the reference object archetype identifier must be identical, or conform to the type of the slot, if there is one, in the parent archetype, or else to the reference model type of the attribute in the flat parent under which the reference object appears in the child archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VARXR</strong> external reference refers to resolvable artefact: the archetype reference must refer to an artefact that can be found in the current repository.</p>
</div>
<div class="paragraph">
<p>The following validity rules apply to a <code>C_ARCHETYPE_ROOT</code> that specialises a <code>ARCHETYPE_SLOT</code> in the parent archetype:</p>
</div>
<div class="paragraph rule">
<p><strong>VARXID</strong> external reference slot filling id validity: an external reference node defined as a filler for a slot in the parent archetype must have a node id that is a specialisation of that of the slot.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_archetype_slot_class">5.12.2. ARCHETYPE_SLOT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>ARCHETYPE_SLOT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Constraint describing a  slot' where another archetype can occur.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_OBJECT</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>includes</strong>: <code>List&lt;ASSERTION&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of constraints defining other archetypes that could be included at this point.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>excludes</strong>: <code>List&lt;ASSERTION&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of constraints defining other archetypes that cannot be included at this point.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_closed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if this slot specification in this artefact is closed to further filling either in further specialisations or at runtime. Default value False, i.e. unless explicitly set, a slot remains open.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>any_allowed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if no constraints stated, and slot is not closed.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_validity_rules_6">Validity Rules</h5>
<div class="paragraph">
<p>The validity rules for <code>ARCHETYPE_SLOTs</code> are as follows:</p>
</div>
<div class="paragraph rule">
<p><strong>VDFAI</strong> archetype identifier validity in definition. Any archetype identifier mentioned in an archetype slot in the definition section must conform to the published openEHR specification for archetype identifiers.</p>
</div>
<div class="paragraph rule">
<p><strong>VDSIV</strong> archetype slot ‘include’ constraint validity. The ‘include’ constraint in an archetype slot must conform to the slot constraint validity rules.</p>
</div>
<div class="paragraph rule">
<p><strong>VDSEV</strong> archetype slot ‘exclude’ constraint validity. The ‘exclude’ constraint in an archetype slot must conform to the slot constraint validity rules.</p>
</div>
<div class="paragraph">
<p>The slot constraint validity rules are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="eiffel"><span class="tok-kr">if</span> <span class="tok-n">includes</span> <span class="tok-ow">not</span> <span class="tok-n">empty</span> <span class="tok-ow">and</span> <span class="tok-o">=</span> <span class="tok-err">&#39;</span><span class="tok-n">any</span><span class="tok-err">&#39;</span> <span class="tok-kr">then</span>
	<span class="tok-ow">not</span> <span class="tok-p">(</span><span class="tok-n">excludes</span> <span class="tok-n">empty</span> <span class="tok-ow">or</span> <span class="tok-o">/=</span> <span class="tok-err">&#39;</span><span class="tok-n">any</span><span class="tok-err">&#39;</span><span class="tok-p">)</span> <span class="tok-o">==&gt;</span> <span class="tok-nc">VDSEV</span> <span class="tok-n">Error</span>
<span class="tok-kr">elseif</span> <span class="tok-n">includes</span> <span class="tok-ow">not</span> <span class="tok-n">empty</span> <span class="tok-ow">and</span> <span class="tok-o">/=</span> <span class="tok-err">&#39;</span><span class="tok-n">any</span><span class="tok-err">&#39;</span> <span class="tok-kr">then</span>
	<span class="tok-ow">not</span> <span class="tok-p">(</span><span class="tok-n">excludes</span> <span class="tok-n">empty</span> <span class="tok-ow">or</span> <span class="tok-o">=</span> <span class="tok-err">&#39;</span><span class="tok-n">any</span><span class="tok-err">&#39;</span><span class="tok-p">)</span> <span class="tok-o">==&gt;</span> <span class="tok-nc">VDSEV</span> <span class="tok-n">Error</span>
<span class="tok-kr">elseif</span> <span class="tok-n">excludes</span> <span class="tok-ow">not</span> <span class="tok-n">empty</span> <span class="tok-ow">and</span> <span class="tok-o">=</span> <span class="tok-err">&#39;</span><span class="tok-n">any</span><span class="tok-err">&#39;</span> <span class="tok-kr">then</span>
	<span class="tok-ow">not</span> <span class="tok-p">(</span><span class="tok-n">includes</span> <span class="tok-n">empty</span> <span class="tok-ow">or</span> <span class="tok-o">/=</span> <span class="tok-err">&#39;</span><span class="tok-n">any</span><span class="tok-err">&#39;</span><span class="tok-p">)</span> <span class="tok-o">==&gt;</span> <span class="tok-nc">VDSIV</span> <span class="tok-n">Error</span>
<span class="tok-kr">elseif</span> <span class="tok-n">excludes</span> <span class="tok-ow">not</span> <span class="tok-n">empty</span> <span class="tok-ow">and</span> <span class="tok-o">/=</span> <span class="tok-err">&#39;</span><span class="tok-n">any</span><span class="tok-err">&#39;</span> <span class="tok-kr">then</span>
	<span class="tok-ow">not</span> <span class="tok-p">(</span><span class="tok-n">includes</span> <span class="tok-n">empty</span> <span class="tok-ow">or</span> <span class="tok-o">=</span> <span class="tok-err">&#39;</span><span class="tok-n">any</span><span class="tok-err">&#39;</span><span class="tok-p">)</span> <span class="tok-o">==&gt;</span> <span class="tok-nc">VDSIV</span> <span class="tok-n">Error</span>
<span class="tok-kr">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following validity rules apply to <code>ARCHETYPE_SLOTs</code> defined as the specialisation of a slot in the parent archetype:</p>
</div>
<div class="paragraph rule">
<p><strong>VDSSID</strong> slot redefinition child node id: a slot node in a specialised archetype that redefines a slot node in the flat parent must have an identical node id.</p>
</div>
<div class="paragraph rule">
<p><strong>VDSSM</strong> specialised archetype slot definition match validity. The set of archetypes matched from a library of archetypes by a specialised archetype slot definition must be a proper subset of the set matched from the same library by the parent slot definition.</p>
</div>
<div class="paragraph rule">
<p><strong>VDSSP</strong> specialised archetype slot definition parent validity. The flat parent of the specialisation of an archetype slot must be not be closed (is_closed = False).</p>
</div>
<div class="paragraph rule">
<p><strong>VDSSC</strong> specialised archetype slot definition closed validity. In the specialisation of an archetype slot, either the slot can be specified to be closed (is_closed = True) or the slot can be narrowed, but not both.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_c_complex_object_proxy_class">5.12.3. C_COMPLEX_OBJECT_PROXY Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>C_COMPLEX_OBJECT_PROXY</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">A constraint defined by proxy, using a reference to an object constraint defined elsewhere in the same archetype. Note that since this object refers to another node, there are two objects with available occurrences values. The local occurrences value on a COJMPLEX_OBJECT_PROXY should always be used; when setting this from a seri- alised form, if no occurrences is mentioned, the target occurrences should be used (not the standard default of {1..1}); otherwise the locally specified occurrences should be used as normal. When serialising out, if the occurrences is the same as that of the target, it can be left out.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_OBJECT</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>target_path</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reference to an object node using archetype path notation.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>use_target_occurrences</strong>: <code>Boolean</code><br>
<strong><em>Post</em></strong>: Result = (occurrences = Void)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if target occurrences are to be used as the value of occurrences in this object; by the time of runtime use, the target occurrences value has to be set into this object.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_validity_rules_7">Validity Rules</h5>
<div class="paragraph">
<p>The following validity rules applies to internal references:</p>
</div>
<div class="paragraph rule">
<p><strong>VUNT</strong> use_node reference model type validity: the reference model type mentioned in an <code>C_COMPLEX_OBJECT_PROXY</code> node must be the same as or a super-type (according to the reference model) of the reference model type of the node referred to.</p>
</div>
<div class="paragraph rule">
<p><strong>VUNP</strong> use_node path validity: the path mentioned in a use_node statement must refer to an object node defined elsewhere in the same archetype or any of its specialisation parent archetypes, that is not itself an internal reference node, and which carries a node identifier if one is needed at the reference point.</p>
</div>
<div class="paragraph">
<p>The following validity rule applies to the redefinition of an internal reference in a specialised archetype:</p>
</div>
<div class="paragraph rule">
<p><strong>VSUNT</strong> use_node specialisation parent validity: a <code>C_COMPLEX_OBJECT_PROXY</code> node may be redefined in a specialised archetype by another <code>C_COMPLEX_OBJECT_PROXY</code> (e.g. in order to redefine occurrences), or by a <code>C_COMPLEX_OBJECT</code> structure that legally redefines the target <code>C_COMPLEX_OBJECT</code> node referred to by the reference.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_c_primitive_object_class">5.12.4. C_PRIMITIVE_OBJECT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong><em>C_PRIMITIVE_OBJECT (abstract)</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Parent of types representing constraints on primitive types.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_DEFINED_OBJECT</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>assumed_value</strong>: <code>Any</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value to be assumed if none sent in data.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_enumerated_type_constraint</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if this object represents a constraint on an enumerated type from the reference model, where the latter is assumed to be based on a primitive type, generally Integer or String.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code>Any</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Constraint represented by this object; redefine in descendants.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_assumed_value</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if there is an assumed value.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constrained_typename</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generate name of native type that is constrained by this C_XXX type. For most types, it is the C_XXX typename without the 'C_', i.e. XXX. E.g. C_INTEGER &#8594; Integer. For the date/time types the mapping is different.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_validity_rules_8">Validity Rules</h5>
<div class="paragraph">
<p>The validity rules for <code>C_PRIMITIVE_OBJECTs</code> are as follows:</p>
</div>
<div class="paragraph rule">
<p><strong>VOBAV</strong> object node assumed value validity: the value of an assumed value must fall within the value space defined by the constraint to which it is attached.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_c_boolean_class">5.12.5. C_BOOLEAN Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>C_BOOLEAN</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Constraint on instances of Boolean. Both attributes cannot be set to False, since this would mean that the Boolean value being constrained cannot be True or False.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_PRIMITIVE_OBJECT</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code>List&lt;Boolean&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean constraint - a list of Boolean values.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>assumed_value</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>default_value</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock">(effected)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>prototype_value</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_string_class">5.12.6. C_STRING Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>C_STRING</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Constraint on instances of STRING.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_PRIMITIVE_OBJECT</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String constraint - a list of literal strings and / or regular expression strings delimited by the ‘/’ character.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>default_value</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>assumed_value</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock">(effected)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>prototype_value</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock">(effected)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_value</strong> (a_value: <code>String</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if a_value is valid with respect to constraint expressed in concrete instance of this type.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_ordered_class">5.12.7. C_ORDERED Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong><em>C_ORDERED (abstract)</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Abstract parent of primitive constrainer classes based on ORDERED base types, i.e. types like Integer, Real, and the Date/Time types. The model constraint is a List of Intervals, which may include point Intervals, and acts as a efficient and formally tractable representation of any number of point values and/or contiguous intervals of an ordered value domain.<br>
In its simplest form, the constraint accessor returns just a single point Interval&lt;T&gt; object, representing a single value.<br>
The next simplest form is a single proper Interval &lt;T&gt; (i.e. normal two-sided or half-open interval). The most complex form is a list of any combination of point and proper intervals.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_PRIMITIVE_OBJECT</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code>List&lt;Interval&lt;T&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_integer_class">5.12.8. C_INTEGER Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>C_INTEGER</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Constraint on instances of Integer.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_real_class">5.12.9. C_REAL Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>C_REAL</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Constraint on instances of Real.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_temporal_class">5.12.10. C_TEMPORAL Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong><em>C_TEMPORAL (abstract)</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Purpose Abstract parent of C_ORDERED types whose base type is an ISO date/time type.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_ORDERED</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>pattern_constraint</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional alternative constraint in the form of a pattern based on ISO8601. See descendants for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_pattern_constraint</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_date_class">5.12.11. C_DATE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>C_DATE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">ISO 8601-compatible constraint on instances of Date in the form either of a set of validity values, or else date ranges based on the C_ORDERED list constraint. There is no validity flag for ‘year’, since it must always be by definition mandatory in order to have a sensible date at all. Syntax expressions of instances of this class include “YYYY-??-??” (date with optional month and day).</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>month_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validity of month in constrained date.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>day_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validity of day in constrained date.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>timezone_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validity of timezone in constrained date.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Invariant</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Pattern_validity</em></strong>: pattern /= Void implies valid_iso8601_date_constraint_pattern(pattern)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_time_class">5.12.12. C_TIME Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>C_TIME</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">ISO 8601-compatible constraint on instances of Time in the form either of a set of validity values, or else date ranges based on the C_ORDERED list constraint. There is no validity flag for ‘hour’, since it must always be by definition mandatory in order to have a sensible time at all. Syntax expressions of instances of this class include “HH:??:xx” (time with optional minutes and seconds not allowed).</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>minute_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validity of minute in constrained time.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>second_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validity of second in constrained time.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>millisecond_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validity of millisecond in constrained time.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>timezone_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validity of timezone in constrained date.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Invariant</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Pattern_validity</em></strong>: pattern /= Void implies valid_iso8601_time_constraint_pattern (pattern)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_date_time_class">5.12.13. C_DATE_TIME Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>C_DATE_TIME</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">ISO 8601-compatible constraint on instances of Date_Time. There is no validity flag for ‘year’, since it must always be by definition mandatory in order to have a sensible date/time at all. Syntax expressions of instances of this class include “YYYY-MM-DDT??:??:??” (date/time with optional time) and “YYYY-MMDDTHH:MM:xx” (date/time, seconds not allowed).</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>month_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validity of month in constrained date.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>day_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validity of day in constrained date.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>timezone_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validity of timezone in constrained date.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>minute_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validity of minute in constrained time.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>second_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validity of second in constrained time.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>millisecond_validity</strong>: <code>VALIDITY_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validity of millisecond in constrained time.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Invariant</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Pattern_validity</em></strong>: pattern /= Void implies valid_iso8601_date_time_constraint_pattern(pattern)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_duration_class">5.12.14. C_DURATION Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>C_DURATION</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>years_allowed:</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if years are allowed in the constrained Duration.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>months_allowed:</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if months are allowed in the constrained Duration.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>weeks_allowed:</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if weeks are allowed in the constrained Duration.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>days_allowed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if days are allowed in the constrained Duration.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>hours_allowed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if hours are allowed in the constrained Duration.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>minutes_allowed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if minutes are allowed in the constrained Duration.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>seconds_allowed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if seconds are allowed in the constrained Duration.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>fractional_seconds_allowed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if fractional seconds are allowed in the constrained Duration.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_terminology_code_class">5.12.15. C_TERMINOLOGY_CODE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>C_TERMINOLOGY_CODE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Constrainer type for instances of TERMINOLOGY_CODE. The primary expression of the constraint is in the property `tuple_constraint', and comes in 3 variations:<br>
* a single at-code<br>
* a single ac-code, representing a value-set that is defined in the archetype terminology<br>
* a list of at- and/or ac-codes, representing the possibilities of a tuple constraint<br>
The last possibility above is enabled by the merge_tuple routine, which enables the constraint of another single-valued C_TERMINOLOGY_CODE to be merged with the current one.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_PRIMITIVE_OBJECT</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of individual constraint - a single string that can either be a local at-code, or a local ac-code signifying a locally defined value set. If an ac-code, assumed_value may contain an at-code from the value set of the ac-code.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>assumed_value</strong>: <code>TERMINOLOGY_CODE</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>default_value</strong>: <code>TERMINOLOGY_CODE</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_set_expanded</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Effective value or value set of single constraint in tuple_constraint, mediated by terminology to expand an ac-code.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_set_substituted</strong>: <code>List&lt;Uri&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of external URI(s) either substituted for local at-codes in value_set_expanded, or else an external ref-set URI substituted for the accode in value_set_id, via bindings, if they exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_set_resolved</strong>: <code>List&lt;TERMINOLOGY_CODE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Final set of codes, which may be internal or external, to which value set is resolved. For internally defined value sets, the list is 1:1 with value_set_substituted. For external value-sets, the list is determined by a terminology service.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock">(effected)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_value</strong> (a_value: <code>TERMINOLOGY_CODE</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if a_value is valid with respect to constraint expressed in concrete instance of this type.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock">(effected)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>prototype_value</strong>: <code>TERMINOLOGY_CODE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A generated prototype value from this constraint object.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_terminology_code_class">5.12.16. TERMINOLOGY_CODE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>TERMINOLOGY_CODE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Logically primitive type representing a reference to a terminology concept, in the form of a terminology identifier, optional version, and a code or code string from the terminology.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>terminology_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>terminology_version</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>code_string</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>uri</strong>: <code>Uri</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_second_order_class">5.12.17. C_SECOND_ORDER Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong><em>C_SECOND_ORDER (abstract)</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Abstract parent of classes defining second order constraints.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>members</strong>: <code>List&lt;ARCHETYPE_CONSTRAINT&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Members of this second order constrainer. Normally redefined in descendants.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_c_attribute_tuple_class">5.12.18. C_ATTRIBUTE_TUPLE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>C_ATTRIBUTE_TUPLE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Object representing a constraint on an atttribute tuple, i.e. a group of attributes that are constrained together. Typically used for representing co-varying constraints like {units, range} constraints.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">C_SECOND_ORDER</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>tuples</strong>: <code>List&lt;C_PRIMITIVE_TUPLE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tuple definitions.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>members</strong>: <code>List&lt;C_ATTRIBUTE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of C_ATTRIBUTEs forming the definition of the tuple.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_assertion_package">6. The Assertion Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_4">6.1. Overview</h3>
<div class="paragraph">
<p>Assertions are expressed in archetypes in typed first-order predicate logic (FOL). They are used in two places: to express archetype slot constraints, and to express rules in complex object constraints. In both of these places, their role is to constrain something inside the archetype. Constraints on external resources such as terminologies are expressed in the constraint binding part of the archetype terminology, described in Figure <a href="#terminology_package">Terminology Package</a>. The assertion package is illustrated below in <a href="#rules_package">Rules Package</a>.</p>
</div>
<div id="rules_package" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="uml_diagrams/AOM-rules.svg" alt="AOM rules">
</div>
<div class="title">Figure 19. Rules Package</div>
</div>
</div>
<div class="sect2">
<h3 id="_semantics_2">6.2. Semantics</h3>
<div class="paragraph">
<p>Archetype assertions are statements which contain the following elements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>variables, which are inbuilt, archetype path-based, or external query results;</p>
</li>
<li>
<p>manifest constants of any primitive type, including the date/time types</p>
</li>
<li>
<p>arithmetic operators: +, *, -, /, ^ (exponent), % (modulo division)</p>
</li>
<li>
<p>relational operators: &gt;, &lt;, &gt;=, &#8656;, =, !=, matches</p>
</li>
<li>
<p>boolean operators: not, and, or, xor</p>
</li>
<li>
<p>quantifiers applied to container variables: for_all, exists</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A syntax of assertions is defined in the openEHR ADL specification. The package described here is designed to allow the representation of a general-purpose expression tree, as generated by a parser. This relatively simple model of expressions is sufficiently powerful for representing the subset of FOL expressions required in archetypes and templates.</p>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_2">6.3. Class Descriptions</h3>
<div class="sect3">
<h4 id="_rule_statement_class">6.3.1. RULE_STATEMENT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong><em>RULE_STATEMENT (abstract)</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Abstract concept of any statement in a block of rule statements.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">RULE_ELEMENT</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_assertion_class">6.3.2. ASSERTION Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>ASSERTION</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Structural model of a typed first order predicate logic assertion, in the form of an expression tree, including optional variable definitions.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">RULE_STATEMENT</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>tag</strong>:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expression tag, used for differentiating multiple assertions.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>string_expression</strong>:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String form of expression, in case an expression evaluator taking String expressions is used for evaluation.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>variables</strong>: <code>List&lt;ASSERTION_VARIABLE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Definitions of variables used in the assertion expression.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>expression</strong>: <code>EXPR_ITEM</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Root of expression tree.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_variable_declaration_class">6.3.3. VARIABLE_DECLARATION Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong><em>VARIABLE_DECLARATION (abstract)</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Definition of a named variable used in an assertion expression.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">RULE_STATEMENT</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>definition</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formal definition of the variable.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>Any</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formal definition of the variable. Value of the variable once evaluated.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_expr_variable_class">6.3.4. EXPR_VARIABLE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXPR_VARIABLE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">A variable whose definition is an expression, including atomic expressions such as constants and model references (i.e. path references).</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">VARIABLE_DECLARATION</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>expression</strong>: <code>EXPR_ITEM</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expression tree of expression.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_builtin_variable_class">6.3.5. BUILTIN_VARIABLE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>BUILTIN_VARIABLE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">A variable with a name and definition from a small set of assumed environmental variables. It is assumed that the implementation will correctly generate the ap-propriate values and types for these variables. The current set of built-in varia-bles is as follows:<br>
• current_date: ISO8601_DATE<br>
• current_time: ISO8601_TIME<br>
• current_date_time: ISO8601_DATE_TIME</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">VARIABLE_DECLARATION</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_query_variable_class">6.3.6. QUERY_VARIABLE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>QUERY_VARIABLE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Definition of a variable whose value is derived from a query run on a data con-text in the operational environment. Typical uses of this kind of variable are to obtain values like the patient date of birth, sex, weight, and so on. It could also be used to obtain items from a knowledge context, such as a drug database.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">VARIABLE_DECLARATION</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>context</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional name of context. This allows a basic separation of query types to be done in more sophisticated environments. Possible values might be “patient”, “medications” and so on.<br>
Not yet standardised.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>query_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifier of query in the external context, e.g. “date_of_birth”.<br>
Not yet standardised.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>query_args</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional arguments to query.<br>
Not yet standardised.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_expr_item_class">6.3.7. EXPR_ITEM Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong><em>EXPR_ITEM (abstract)</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Abstract parent of all expression tree items.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">RULE_ELEMENT</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>Any</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_expr_leaf_class">6.3.8. EXPR_LEAF Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXPR_LEAF</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Expression tree leaf item representing one of:<br>
• a manifest constant of any primitive type;<br>
• a path referring to a value in the archetype;<br>
• a constraint;<br>
• a variable reference.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">EXPR_ITEM</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>reference_type</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of reference: “constant”, “attribute”, “function”, “constraint”. The first three are used to indicate the referencing mechanism for an operand. The last is used to indicate a constraint operand, as happens in the case of the right-hand operand of the ‘matches’ operator.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_expr_constant_class">6.3.9. EXPR_CONSTANT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXPR_CONSTANT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Constant expression tree leaf item. This can represent a manifest constant of any primitive type, i.e.:<br>
• Integer, <br>
• Real, <br>
• Boolean, <br>
• String, <br>
• Character, <br>
• Date, <br>
• Time, <br>
• Date_time, <br>
• Duration<br>
• an Interval of any of the above types that are Ordered (see Support IM)<br>
• a list of any of the above types.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">EXPR_LEAF</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>Any</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_expr_constraint_class">6.3.10. EXPR_CONSTRAINT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXPR_CONSTRAINT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Expression tree leaf item representing a constraint on a primitive type, expressed in the form of concrete subtype of C_PRIMITIVE_OBJECT.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">EXPR_LEAF</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>item</strong>: <code>C_PRIMITIVE_OBJECT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The constraint.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_expr_archetype_id_constraint_class">6.3.11. EXPR_ARCHETYPE_ID_CONSTRAINT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXPR_ARCHETYPE_ID_CONSTRAINT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Expression tree leaf item representing a constraint on an archetype identifier.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">EXPR_CONSTRAINT</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>item</strong>: <code>C_STRING</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_expr_model_ref_class">6.3.12. EXPR_MODEL_REF Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXPR_MODEL_REF</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Expression tree leaf item representing a reference to a value found in data at a location specified by a path in the archetype definition.<br>
• A path referring to a value in the archetype (paths with a leading ‘/’ are in the definition section.<br>
• Paths with no leading ‘/’ are in the outer part of the archetype, e.g. “arche-type_id/value” refers to the String value of the archetype_id attribute of the enclosing archetype.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">EXPR_LEAF</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>path</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path to the archetype node.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_expr_variable_ref_class">6.3.13. EXPR_VARIABLE_REF Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXPR_VARIABLE_REF</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Expression tree leaf item representing a reference to a defined variable.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">EXPR_LEAF</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>declaration</strong>: <code>VARIABLE_DECLARATION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The variable referred to.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_expr_operator_class">6.3.14. EXPR_OPERATOR Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong><em>EXPR_OPERATOR (abstract)</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Abstract parent of operator types.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">EXPR_ITEM</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>precedence_overridden</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the natural precedence of operators is overridden in the expression represented by this node of the expression tree. If True, parentheses should be introduced around the totality of the syntax expression corresponding to this operator node and its operands.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>operator</strong>: <code>OPERATOR_KIND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of operator as an Integer value from the OPERATOR_KIND enumeration.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_expr_unary_operator_class">6.3.15. EXPR_UNARY_OPERATOR Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXPR_UNARY_OPERATOR</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Unary operator expression node.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">EXPR_OPERATOR</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>operand</strong>: <code>EXPR_ITEM</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operand node.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_expr_binary_operator_class">6.3.16. EXPR_BINARY_OPERATOR Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXPR_BINARY_OPERATOR</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Binary operator expression node.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">EXPR_OPERATOR</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>left_operand</strong>: <code>EXPR_ITEM</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Left operand node.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>right_operand</strong>: <code>EXPR_ITEM</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Right operand node.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_operator_kind_enumeration">6.3.17. OPERATOR_KIND Enumeration</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Enumeration</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>OPERATOR_KIND</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Enumeration type for operator types in assertion expressions.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_eq</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equals operator (= or ==)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_ne</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not equals operator (!= or /=)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_le</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Less-than or equals operator (&#8656;)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_lt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Less-than operator (&#8656;)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_ge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Greater-than or equals operator (&gt;=)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_gt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Greater-than operator (&gt;)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_matches</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matches operator (matches or is_in)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not logical operator</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_and</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">And logical operator</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_or</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Or logical operator.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_xor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Xor logical operator</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_implies</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implies logical operator</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_for_all</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For-all (universal) quantifier</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_exists</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exists quantifier</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_plus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arithmetic plus operator (+)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_minus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arithmetic minus operator (-)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_multiply</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arithmetic multiplication operator (*)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_divide</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arithmetic division operator (/)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">op_exponent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arithmetic exponentiation operator (^)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_terminology_package">7. Terminology Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_5">7.1. Overview</h3>
<div class="paragraph">
<p>All local terminology as well as terminological and terminology binding elements of an archetype are represented in the terminology section of an archetype, whose semantics are defined by the <em>archetype.terminology</em> package, shown below.</p>
</div>
<div id="terminology_package" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="uml_diagrams/AOM-terminology.svg" alt="AOM terminology">
</div>
<div class="title">Figure 20. Terminology Package</div>
</div>
<div class="paragraph">
<p>An archetype terminology consists of the following elements.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>term_definitions: a mandatory structure consisting of lists of term definitions defined local to the archetype, one list for each language of translation, as well as the original language of definition. The entries in this table include:</p>
</li>
<li>
<p>Some or all id-codes. One of these is a code of the form ‘id1’, ‘id1.1’, ‘id1.1.1’ etc, denoting the concept of the archetype as a whole. This particular code is recorded in the <code><em>concept_code</em></code> attribute and is used as the id-code on the root node in the archetype definition. Not all id-codes are required to be in the term_definitions structure - for nodes that are children of single-valued attribute, a term definition is optional (and not typically defined).</p>
</li>
<li>
<p>at-codes used to define value terms and inline value sets/ All at-codes will appear within a <code>C_TERMINOLOGY_CODE</code> constraint object within the archetype. All at-codes must have a definition in the term_definitions.</p>
</li>
<li>
<p>ac-codes used to define external value set references. All ac-codes must have a definition in the term_definitions.</p>
</li>
<li>
<p>term_bindings: an optional structure consisting of list of terms and bindings, one list for each external terminology (i.e. the terminology or ontology being ‘bound to’). Each ‘binding’ is a URI to a target. For a binding of an id-code or an at-code, the target will be a single term, and for an ac-code, it will designate a ref-set or value set.</p>
</li>
<li>
<p>value_sets: optional structure defining value-set relationships for locally defined value sets. Each value set is identified by an ac-code and has as members one or more at-codes.</p>
</li>
<li>
<p>terminology_extracts: an optional structure containing extracts from external terminologies such as SNOMED CT, ICDx, or any local terminology. These extracts include the codes and preferred term rubrics, enabling the terms to be used for both display purposes. This structure is normally only used for templates, enabling small value sets for which no external reference set or subset is defined to be captured locally in the template.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Depending on whether the archetype is in differential or flat form, an instance of the <code>ARCHETYPE_TERMINOLOGY</code> class contains terms, constraints, bindings and terminology extracts that were respectively either introduced in the owning archetype, or all codes and bindings obtained by compressing an archetype lineage through inheritance. A typical instance structure of <code>ARCHETYPE_TERMINOLOGY</code> is illustrated in Figure <a href="#terminology_instance">Terminology Instance Structure</a>.</p>
</div>
<div id="terminology_instance" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/terminology_instance_structure.png" alt="terminology instance structure">
</div>
<div class="title">Figure 21. Terminology Instance Structure</div>
</div>
</div>
<div class="sect2">
<h3 id="_semantics_3">7.2. Semantics</h3>
<div class="sect3">
<h4 id="_specialisation_depth">7.2.1. Specialisation Depth</h4>
<div class="paragraph">
<p>Any given archetype occurs at some point in a lineage of archetypes related by specialisation, where the depth is reflected by the <code><em>specialisation_depth</em></code> function. An archetype which is not a specialisation of another has a specialisation_depth of 0. Term and constraint codes introduced in the terminology of specialised archetypes (i.e. which did not exist in the terminology of the parent archetype) are defined in a strict way, using ‘.’ (period) markers. For example, an archetype of specialisation depth 2 will use term definition codes like the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id0.0.1</code> - a new term introduced in this archetype, which is not a specialisation of any previous term in any of the parent archetypes;</p>
</li>
<li>
<p><code>id4.0.1</code> - a term which specialises the ‘id4’ term from the top parent. An intervening ‘.0’ is required to show that the new term is at depth 2, not depth 1;</p>
</li>
<li>
<p><code>id25.1.1</code> - a term which specialises the term ‘id25.1’ from the immediate parent, which itself specialises the term ‘id1’ from the top parent.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This systematic definition of codes enables software to use the structure of the codes to more quickly and accurately make inferences about term definitions up and down specialisation hierarchies. Constraint codes on the other hand do not follow these rules, and exist in a flat code space instead.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_3">7.3. Class Descriptions</h3>
<div class="sect3">
<h4 id="_archetype_terminology_class">7.3.1. ARCHETYPE_TERMINOLOGY Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>ARCHETYPE_TERMINOLOGY</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Local terminology of an archetype. This class defines the semantics of the terminology of an archetype.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_differential</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>original_language</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Original language of the terminology, as set at archetype creation or parsing time; must be a code in the ISO 639-1 2 character language code-set.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>concept_code</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Term code defining the meaning of the archetype as a whole, and always used as the at-code on the root node of the archetype. Must be defined in the term_definitions property.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>term_definitions</strong>: <code>Hash&lt;Hash&lt;ARCHETYPE_TERM, String&gt;, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory of term definitions as a two-level table. The outer hash keys are language codes, e.g. “en”, “de”, while the inner hash keys are term codes, e.g. “id17”, “at4”.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>term_bindings</strong>: <code>Hash &lt;Hash&lt;Uri, String&gt;, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory of bindings to external terminology codes and value sets, as a two-level table. The outer hash keys are terminology ids, e.g. “SNOMED_CT”, and the inner hash keys are constraint codes, e.g. “at4”, “ac13” or paths. The indexed DV_URI objects represent references to externally defined resources, either terms, ontology concepts, or terminology subsets / ref-sets.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>parent_archetype</strong>: <code>ARCHETYPE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Archetype which owns this terminology.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_sets</strong>: <code>Hash&lt;VALUE_SET, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Archetype-local value sets, each keyed by value-set id, i.e. an ac-code.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>terminology_extracts</strong>: <code>Hash&lt;Hash&lt;ARCHETYPE_TERM, String&gt;, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory of extracts of external terminologies, as a two-level table. The outer hash keys are terminology ids, e.g. “SNOMED_CT”, while the inner hash keys are term codes or code-phrases from the relevant terminology, e.g. “10094842”.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>specialisation_depth</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specialisation depth of this archetype. Unspecialised archetypes have depth 0, with each additional level of specialisation adding 1 to the specialisation_depth.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id_codes</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of all id codes in the terminology., i.e. the “id” codes in an ADL archetype, which are the node_ids on C_OBJECT descendants.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_codes</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of all value term codes in the terminology, i.e. the “at” codes in an ADL archetype, which are used as possible values on terminological constrainer nodes.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_set_codes</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of all value set codes in the terminology defining value sets. These correspond to the “ac” codes in an ADL archetype.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_language</strong> (a_lang: <code>String</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if language `a_lang' is present in archetype terminology.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_terminology</strong> (a_terminology_id: <code>String</code>): <code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if terminology `a_terminology' is present in archetype ontology.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_term_code</strong> (a_code: <code>String</code>): <code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if code 'a_code' defined in this terminology.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>term_definition</strong> (a_lang: <code>String</code>, a_code: <code>String</code>): <code>ARCHETYPE_TERM</code><br>
<strong><em>Pre</em></strong>: has_term-definition (a_lang, a_code)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Term definition for a code, in a specified language.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>term_binding</strong> (a_terminology: <code>String</code>, a_code: <code>String</code>): <code>Uri</code><br>
<strong><em>Pre</em></strong>: has_term_binding (a_terminology_id, a_code)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Binding of constraint corresponding to a_code in target external terminology a_terminology_id, as a string, which is usually a formal query expression.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>terminologies_available</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of terminologies to which term or constraint bindings exist in this terminology, computed from bindings.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>terminology_extract_term</strong> (a_terminology_id: <code>String</code>, a_code: <code>String</code>): <code>ARCHETYPE_TERM</code><br>
<strong><em>Pre</em></strong>: has_terminology_extract (a_terminology_id) and has_terminology_extract_code (a_code)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return an ARCHETYPE_TERM from specified terminology extract, for specified term code.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_terminology_extract</strong> (a_terminology_id: <code>String</code>): <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>languages_available</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of languages in which terms in this terminology are available.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Invariant</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Original_language_validity</em></strong>: code_set (Code_set_id_languages).has_concept_id (original_language)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>concept_code_validity</em></strong>: id_codes.has (concept_code)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Term_bindings_validity</em></strong>: bindings /= void implies not bindings.is_empty</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Parent_archetype_valid</em></strong>: parent_archetype.terminology = Current</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_terminology_relation_class">7.3.2. TERMINOLOGY_RELATION Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong><em>TERMINOLOGY_RELATION (abstract)</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Class whose instances represent any kind of 1:N relationship between a source term and 1-N target terms.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code of source term of this relation.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>members</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of target terms in this relation.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_value_set_class">7.3.3. VALUE_SET Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>VALUE_SET</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Representation of a flat value set within the archetype terminology.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">TERMINOLOGY_RELATION</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_archetype_term_class">7.3.4. ARCHETYPE_TERM Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>ARCHETYPE_TERM</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Representation of any coded entity (term or constraint) in the archetype ontology.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>code</strong>:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code of this term.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>text</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Short term text, typically for display.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>description</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full description text.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>other_items</strong>: <code>Hash&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash of keys and corresponding values for other items in a term, e.g. provenance.<br>
Hash of keys ("text", "description" etc) and corresponding values.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_validity_rules_9">Validity Rules</h5>
<div class="paragraph">
<p>The following validity rules apply to instances of this class in an archetype:</p>
</div>
<div class="paragraph rule">
<p><strong>VTVSID</strong>: value-set id defined. The identifying code of a value set must be defined in the term definitions of the terminology of the current archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VTVSMD</strong>: value-set members defined. The member codes of a value set must be defined in the term definitions of the terminology of the flattened form of the current archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VTVSUQ</strong>: value-set members unique. The member codes of a value set must be unique within the value set.</p>
</div>
<div class="paragraph rule">
<p><strong>VTSD</strong> specialisation level of codes. Term or constraint code defined in archetype terminology must be of the same specialisation level as the archetype (differential archetypes), or the same or a less specialised level (flat archetypes).</p>
</div>
<div class="paragraph rule">
<p><strong>VTLC</strong>: language consistency. Languages consistent: all term codes and constraint codes exist in all languages.</p>
</div>
<div class="paragraph rule">
<p><strong>VTTBK</strong>: terminology term binding key valid. Every term binding must be to either a defined archetype term (‘at-code’) or to a path that is valid in the flat archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VTCBK</strong>: terminology constraint binding key valid. Every constraint binding must be to a defined archetype constraint code (‘ac-code’).</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_validation_and_transformation_semantics">8. Validation and Transformation Semantics</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_validation">8.1. Validation</h3>

</div>
<div class="sect2">
<h3 id="_flattening">8.2. Flattening</h3>

</div>
<div class="sect2">
<h3 id="_diff_ing">8.3. Diff’ing</h3>
<div class="literalblock">
<div class="content">
<pre> </pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references">References</h2>
<div class="sectionbody">
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="Beale_2000"></a>[Beale_2000] Beale T. <strong>Archetypes: Constraint-based Domain Models for Future-proof Information Systems.</strong> 2000.  Available at <a href="http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_web_2000.pdf" class="bare">http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_web_2000.pdf</a> .</p>
</li>
<li>
<p><a id="Beale_2002"></a>[Beale_2002] Beale T. <strong>Archetypes: Constraint-based Domain Models for Future-proof Information Systems.</strong> Eleventh OOPSLA Workshop on Behavioral Semantics: Serving the Customer (Seattle, Washington, USA, November 4, 2002). Edited by Kenneth Baclawski and Haim Kilov. Northeastern University, Boston, 2002, pp. 16-32. Available at <a href="http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_oopsla_2002.pdf" class="bare">http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_oopsla_2002.pdf</a> .</p>
</li>
<li>
<p><a id="Rector"></a>[Rector] Rector A L. <strong>Clinical terminology: why is it so hard?</strong> Methods Inf Med. 1999 Dec;38(4-5):239-52. Available at <a href="http://www.cs.man.ac.uk/~rector/papers/Why-is-terminology-hard-single-r2.pdf" class="bare">http://www.cs.man.ac.uk/~rector/papers/Why-is-terminology-hard-single-r2.pdf</a> .</p>
</li>
<li>
<p><a id="OWL"></a>[OWL] W3C. <strong>OWL - The Web Ontology Language.</strong>  See <a href="http://www.w3.org/TR/2003/CR-owl-ref-20030818/" class="bare">http://www.w3.org/TR/2003/CR-owl-ref-20030818/</a> .</p>
</li>
<li>
<p><a id="Horrocks"></a>[Horrocks] Horrocks I, Patel-Schneider P, McGuiness D, Welty C. <strong>OWL: a Description Logic Based Ontology Language for the Semantic Web</strong> See <a href="http://www.cs.ox.ac.uk/ian.horrocks/Publications/download/2003/HPMW07.pdf" class="bare">http://www.cs.ox.ac.uk/ian.horrocks/Publications/download/2003/HPMW07.pdf</a> .</p>
</li>
<li>
<p><a id="OCL"></a>[OCL] <strong>The Object Constraint Language 2.0.</strong> Object Management Group (OMG). Available at <a href="http://www.omg.org/cgi-bin/doc?ptc/2003-10-14" class="bare">http://www.omg.org/cgi-bin/doc?ptc/2003-10-14</a> .</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-06-24 21:36:25 BST
</div>
</div>
</body>
</html>